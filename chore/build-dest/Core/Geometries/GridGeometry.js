import BasicGeometry from "./Base/BasicGeometry";
import JThreeContext from "../../JThreeContext";
import ContextComponents from "../../ContextComponents";
class GridGeometry extends BasicGeometry {
    constructor(name) {
        super();
        this._holizontalDivide = 10;
        this._verticalDivide = 10;
        const rm = JThreeContext.getContextComponent(ContextComponents.ResourceManager);
        this.primitiveTopology = WebGLRenderingContext.LINES;
        this.indexBuffer = rm.createBuffer(name + "index", WebGLRenderingContext.ELEMENT_ARRAY_BUFFER, WebGLRenderingContext.STATIC_DRAW, 1, WebGLRenderingContext.UNSIGNED_SHORT);
        this.positionBuffer = rm.createBuffer(name + "-pos", WebGLRenderingContext.ARRAY_BUFFER, WebGLRenderingContext.STATIC_DRAW, 3, WebGLRenderingContext.FLOAT);
        this.normalBuffer = rm.createBuffer(name + "-nor", WebGLRenderingContext.ARRAY_BUFFER, WebGLRenderingContext.STATIC_DRAW, 3, WebGLRenderingContext.FLOAT);
        this.uvBuffer = rm.createBuffer(name + "-uv", WebGLRenderingContext.ARRAY_BUFFER, WebGLRenderingContext.STATIC_DRAW, 2, WebGLRenderingContext.FLOAT);
        this.__updateBuffers();
    }
    get HolizontalDivide() {
        return this._holizontalDivide;
    }
    get VerticalDivide() {
        return this._verticalDivide;
    }
    set HolizontalDivide(num) {
        this._holizontalDivide = num;
        this.__updateBuffers();
    }
    set VerticalDivide(num) {
        this._verticalDivide = num;
        this.__updateBuffers();
    }
    get VerticiesCount() {
        return (this.HolizontalDivide + 1) * 2 + (this.VerticalDivide + 1) * 2;
    }
    __updatePositionBuffer() {
        const arr = [];
        for (let i = 0; i < this.HolizontalDivide + 1; i++) {
            const num = -1 + 1 / this.HolizontalDivide * i * 2;
            arr.push(num, 0, -1, num, 0, 1);
        }
        for (let i = 0; i < this.VerticalDivide + 1; i++) {
            const num = -1 + 1 / this.VerticalDivide * i * 2;
            arr.push(-1, 0, num, 1, 0, num);
        }
        this.positionBuffer.update(new Float32Array(arr), arr.length);
    }
    __updateNormalBuffer() {
        this.normalBuffer.update(new Float32Array(new Array(this.VerticiesCount * 3)), this.VerticiesCount * 3);
    }
    __updateUvBuffer() {
        this.uvBuffer.update(new Float32Array(new Array(this.VerticiesCount * 2)), this.VerticiesCount * 2);
    }
    __updateIndexBuffer() {
        const arr = [];
        for (let v = 0; v < this.VerticiesCount; v++) {
            arr.push(v);
        }
        this.indexBuffer.update(new Uint16Array(arr), this.VerticiesCount);
    }
    __updateBuffers() {
        this.__updatePositionBuffer();
        this.__updateNormalBuffer();
        this.__updateUvBuffer();
        this.__updateIndexBuffer();
    }
}
export default GridGeometry;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvcmUvR2VvbWV0cmllcy9HcmlkR2VvbWV0cnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ik9BQU8sYUFBYSxNQUFNLHNCQUFzQjtPQUN6QyxhQUFhLE1BQU0scUJBQXFCO09BQ3hDLGlCQUFpQixNQUFNLHlCQUF5QjtBQUV2RCwyQkFBMkIsYUFBYTtJQUN0QyxZQUFZLElBQVk7UUFDdEIsT0FBTyxDQUFDO1FBVUYsc0JBQWlCLEdBQVcsRUFBRSxDQUFDO1FBQy9CLG9CQUFlLEdBQVcsRUFBRSxDQUFDO1FBVm5DLE1BQU0sRUFBRSxHQUFHLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBa0IsaUJBQWlCLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDakcsSUFBSSxDQUFDLGlCQUFpQixHQUFHLHFCQUFxQixDQUFDLEtBQUssQ0FBQztRQUNyRCxJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxHQUFHLE9BQU8sRUFBRSxxQkFBcUIsQ0FBQyxvQkFBb0IsRUFBRSxxQkFBcUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLHFCQUFxQixDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzNLLElBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLEdBQUcsTUFBTSxFQUFFLHFCQUFxQixDQUFDLFlBQVksRUFBRSxxQkFBcUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVKLElBQUksQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLEdBQUcsTUFBTSxFQUFFLHFCQUFxQixDQUFDLFlBQVksRUFBRSxxQkFBcUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzFKLElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLFlBQVksQ0FBQyxJQUFJLEdBQUcsS0FBSyxFQUFFLHFCQUFxQixDQUFDLFlB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QUM7WUFDN0MsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNkLENBQUM7UUFDRCxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxJQUFJLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDckUsQ0FBQztJQUVTLGVBQWU7UUFDdkIsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7UUFDNUIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDN0IsQ0FBQztBQUNILENBQUM7QUFFRCxlQUFlLFlBQVksQ0FBQyIsImZpbGUiOiJDb3JlL0dlb21ldHJpZXMvR3JpZEdlb21ldHJ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2ljR2VvbWV0cnkgZnJvbSBcIi4vQmFzZS9CYXNpY0dlb21ldHJ5XCI7XG5pbXBvcnQgSlRocmVlQ29udGV4dCBmcm9tIFwiLi4vLi4vSlRocmVlQ29udGV4dFwiO1xuaW1wb3J0IENvbnRleHRDb21wb25lbnRzIGZyb20gXCIuLi8uLi9Db250ZXh0Q29tcG9uZW50c1wiO1xuaW1wb3J0IFJlc291cmNlTWFuYWdlciBmcm9tIFwiLi4vUmVzb3VyY2VNYW5hZ2VyXCI7XG5jbGFzcyBHcmlkR2VvbWV0cnkgZXh0ZW5kcyBCYXNpY0dlb21ldHJ5IHtcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nKSB7XG4gICAgc3VwZXIoKTtcbiAgICBjb25zdCBybSA9IEpUaHJlZUNvbnRleHQuZ2V0Q29udGV4dENvbXBvbmVudDxSZXNvdXJjZU1hbmFnZXI+KENvbnRleHRDb21wb25lbnRzLlJlc291cmNlTWFuYWdlcik7XG4gICAgdGhpcy5wcmltaXRpdmVUb3BvbG9neSA9IFdlYkdMUmVuZGVyaW5nQ29udGV4dC5MSU5FUztcbiAgICB0aGlzLmluZGV4QnVmZmVyID0gcm0uY3JlYXRlQnVmZmVyKG5hbWUgKyBcImluZGV4XCIsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlNUQVRJQ19EUkFXLCAxLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuVU5TSUdORURfU0hPUlQpO1xuICAgIHRoaXMucG9zaXRpb25CdWZmZXIgPSBybS5jcmVhdGVCdWZmZXIobmFtZSArIFwiLXBvc1wiLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuU1RBVElDX0RSQVcsIDMsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5GTE9BVCk7XG4gICAgdGhpcy5ub3JtYWxCdWZmZXIgPSBybS5jcmVhdGVCdWZmZXIobmFtZSArIFwiLW5vclwiLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuQVJSQVlfQlVGRkVSLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuU1RBVElDX0RSQVcsIDMsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5GTE9BVCk7XG4gICAgdGhpcy51dkJ1ZmZlciA9IHJtLmNyZWF0ZUJ1ZmZlcihuYW1lICsgXCItdXZcIiwgV2ViR0xSZW5kZXJpbmdDb250ZXh0LkFSUkFZX0JVRkZFUiwgV2ViR0xSZW5kZXJpbmdDb250ZXh0LlNUQVRJQ19EUkFXLCAyLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuRkxPQVQpO1xuICAgIHRoaXMuX191cGRhdGVCdWZmZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIF9ob2xpem9udGFsRGl2aWRlOiBudW1iZXIgPSAxMDtcbiAgcHJpdmF0ZSBfdmVydGljYWxEaXZpZGU6IG51bWJlciA9IDEwO1xuXG4gIHB1YmxpYyBnZXQgSG9saXpvbnRhbERpdmlkZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9ob2xpem9udGFsRGl2aWRlO1xuICB9XG5cbiAgcHVibGljIGdldCBWZXJ0aWNhbERpdmlkZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl92ZXJ0aWNhbERpdmlkZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgSG9saXpvbnRhbERpdmlkZShudW06IG51bWJlcikge1xuICAgIHRoaXMuX2hvbGl6b250YWxEaXZpZGUgPSBudW07XG4gICAgdGhpcy5fX3VwZGF0ZUJ1ZmZlcnMoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgVmVydGljYWxEaXZpZGUobnVtOiBudW1iZXIpIHtcbiAgICB0aGlzLl92ZXJ0aWNhbERpdmlkZSA9IG51bTtcbiAgICB0aGlzLl9fdXBkYXRlQnVmZmVycygpO1xuICB9XG5cblxuICBwcml2YXRlIGdldCBWZXJ0aWNpZXNDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiAodGhpcy5Ib2xpem9udGFsRGl2aWRlICsgMSkgKiAyICsgKHRoaXMuVmVydGljYWxEaXZpZGUgKyAxKSAqIDI7XG4gIH1cbiAgcHJvdGVjdGVkIF9fdXBkYXRlUG9zaXRpb25CdWZmZXIoKTogdm9pZCB7XG4gICAgY29uc3QgYXJyOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5Ib2xpem9udGFsRGl2aWRlICsgMTsgaSsrKSB7XG4gICAgICBjb25zdCBudW0gPSAtMSArIDEgLyB0aGlzLkhvbGl6b250YWxEaXZpZGUgKiBpICogMjtcbiAgICAgIGFyci5wdXNoKG51bSwgMCwgLTEsIG51bSwgMCwgMSk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5WZXJ0aWNhbERpdmlkZSArIDE7IGkrKykge1xuICAgICAgY29uc3QgbnVtID0gLTEgKyAxIC8gdGhpcy5WZXJ0aWNhbERpdmlkZSAqIGkgKiAyO1xuICAgICAgYXJyLnB1c2goLTEsIDAsIG51bSwgMSwgMCwgbnVtKTtcbiAgICB9XG4gICAgdGhpcy5wb3NpdGlvbkJ1ZmZlci51cGRhdGUobmV3IEZsb2F0MzJBcnJheShhcnIpLCBhcnIubGVuZ3RoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfX3VwZGF0ZU5vcm1hbEJ1ZmZlcigpOiB2b2lkIHtcbiAgICB0aGlzLm5vcm1hbEJ1ZmZlci51cGRhdGUobmV3IEZsb2F0MzJBcnJheShuZXcgQXJyYXkodGhpcy5WZXJ0aWNpZXNDb3VudCAqIDMpKSwgdGhpcy5WZXJ0aWNpZXNDb3VudCAqIDMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9fdXBkYXRlVXZCdWZmZXIoKTogdm9pZCB7XG4gICAgdGhpcy51dkJ1ZmZlci51cGRhdGUobmV3IEZsb2F0MzJBcnJheShuZXcgQXJyYXkodGhpcy5WZXJ0aWNpZXNDb3VudCAqIDIpKSwgdGhpcy5WZXJ0aWNpZXNDb3VudCAqIDIpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9fdXBkYXRlSW5kZXhCdWZmZXIoKTogdm9pZCB7XG4gICAgY29uc3QgYXJyOiBudW1iZXJbXSA9IFtdO1xuICAgIGZvciAobGV0IHYgPSAwOyB2IDwgdGhpcy5WZXJ0aWNpZXNDb3VudDsgdisrKSB7XG4gICAgICBhcnIucHVzaCh2KTtcbiAgICB9XG4gICAgdGhpcy5pbmRleEJ1ZmZlci51cGRhdGUobmV3IFVpbnQxNkFycmF5KGFyciksIHRoaXMuVmVydGljaWVzQ291bnQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9fdXBkYXRlQnVmZmVycygpOiB2b2lkIHtcbiAgICB0aGlzLl9fdXBkYXRlUG9zaXRpb25CdWZmZXIoKTtcbiAgICB0aGlzLl9fdXBkYXRlTm9ybWFsQnVmZmVyKCk7XG4gICAgdGhpcy5fX3VwZGF0ZVV2QnVmZmVyKCk7XG4gICAgdGhpcy5fX3VwZGF0ZUluZGV4QnVmZmVyKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR3JpZEdlb21ldHJ5O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

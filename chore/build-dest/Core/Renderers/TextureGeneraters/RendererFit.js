import GLEnumParser from "../../Canvas/GL/GLEnumParser";
import GeneraterBase from "./GeneraterBase";
import ContextComponents from "../../../ContextComponents";
import JThreeContext from "../../../JThreeContext";
class RendererFit extends GeneraterBase {
    constructor(parent) {
        super(parent);
    }
    get ParentRenderRectangle() {
        return this.__parentRenderer.region;
    }
    generate(texInfo) {
        const rect = this.ParentRenderRectangle;
        const width = rect.Width, height = rect.Height;
        let elementLayout;
        texInfo["layout"] = texInfo["layout"] || "RGBA";
        elementLayout = GLEnumParser.parseTextureLayout(texInfo["layout"]);
        let elementFormat;
        texInfo["format"] = texInfo["format"] || "UBYTE";
        elementFormat = GLEnumParser.parseTextureFormat(texInfo["format"]);
        const rm = JThreeContext.getContextComponent(ContextComponents.ResourceManager);
        const resource = rm.createTexture(this.__parentRenderer.ID + "." + texInfo.name, width, height, elementLayout, elementFormat);
        this.__parentRenderer.on("resize", (s) => {
            const bufTex = resource;
            if (s.Width !== bufTex.Width || s.Height !== bufTex.Height) {
                resource.resize(s.Width, s.Height);
            }
        });
        return resource;
    }
}
export default RendererFit;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvcmUvUmVuZGVyZXJzL1RleHR1cmVHZW5lcmF0ZXJzL1JlbmRlcmVyRml0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJPQUFPLFlBQVksTUFBTSw4QkFBOEI7T0FHaEQsYUFBYSxNQUFNLGlCQUFpQjtPQUdwQyxpQkFBaUIsTUFBTSw0QkFBNEI7T0FFbkQsYUFBYSxNQUFNLHdCQUF3QjtBQUNsRCwwQkFBMEIsYUFBYTtJQUNyQyxZQUFZLE1BQXFCO1FBQy9CLE1BQU0sTUFBTSxDQUFDLENBQUM7SUFDaEIsQ0FBQztJQUVELElBQVkscUJBQXFCO1FBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsTUFBTSxDQUFDO0lBQ3RDLENBQUM7SUFFTSxRQUFRLENBQUMsT0FBMkI7UUFDekMsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLHFCQUFxQixDQUFDO1FBQ3hDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDL0MsSUFBSSxhQUFxQixDQUFDO1FBQzFCLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksTUFBTSxDQUFDO1FBQ2hELGFBQWEsR0FBRyxZQUFZLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDbkUsSUFBSSxhQUFxQixDQUFDO1FBQzFCLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksT0FBTyxDQUFDO1FBQ2pELGFBQWEsR0FBRyxZQUFZLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDbkUsTUFBTSxFQUFFLEdBQUcsYUFBYSxDQUFDLG1CQUFtQixDQUFrQixpQkFBaUIsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNqRyxNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLEdBQUcsR0FBRyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFDOUgsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFZO1lBQzlDLE1BQU0sTUFBTSxHQUFrQixRQUFRLENBQUM7WUFDdkMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxNQUFNLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQyxNQUFNLEtBQUssTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQzNDLFFBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEQsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUNsQixDQUFDO0FBQ0gsQ0FBQztBQUVELGVBQWUsV0FBVyxDQUFDIiwiZmlsZSI6IkNvcmUvUmVuZGVyZXJzL1RleHR1cmVHZW5lcmF0ZXJzL1JlbmRlcmVyRml0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdMRW51bVBhcnNlciBmcm9tIFwiLi4vLi4vQ2FudmFzL0dML0dMRW51bVBhcnNlclwiO1xuaW1wb3J0IEdlbmVyYXRlckluZm9DaHVuayBmcm9tIFwiLi9HZW5lcmF0ZXJJbmZvQ2h1bmtcIjtcbmltcG9ydCBCYXNpY1JlbmRlcmVyIGZyb20gXCIuLi9CYXNpY1JlbmRlcmVyXCI7XG5pbXBvcnQgR2VuZXJhdGVyQmFzZSBmcm9tIFwiLi9HZW5lcmF0ZXJCYXNlXCI7XG5pbXBvcnQgUmVjdGFuZ2xlIGZyb20gXCIuLi8uLi8uLi9NYXRoL1JlY3RhbmdsZVwiO1xuaW1wb3J0IEJ1ZmZlclRleHR1cmUgZnJvbSBcIi4uLy4uL1Jlc291cmNlcy9UZXh0dXJlL0J1ZmZlclRleHR1cmVcIjtcbmltcG9ydCBDb250ZXh0Q29tcG9uZW50cyBmcm9tIFwiLi4vLi4vLi4vQ29udGV4dENvbXBvbmVudHNcIjtcbmltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSBcIi4uLy4uL1Jlc291cmNlTWFuYWdlclwiO1xuaW1wb3J0IEpUaHJlZUNvbnRleHQgZnJvbSBcIi4uLy4uLy4uL0pUaHJlZUNvbnRleHRcIjtcbmNsYXNzIFJlbmRlcmVyRml0IGV4dGVuZHMgR2VuZXJhdGVyQmFzZSB7XG4gIGNvbnN0cnVjdG9yKHBhcmVudDogQmFzaWNSZW5kZXJlcikge1xuICAgIHN1cGVyKHBhcmVudCk7XG4gIH1cblxuICBwcml2YXRlIGdldCBQYXJlbnRSZW5kZXJSZWN0YW5nbGUoKTogUmVjdGFuZ2xlIHtcbiAgICByZXR1cm4gdGhpcy5fX3BhcmVudFJlbmRlcmVyLnJlZ2lvbjtcbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZSh0ZXhJbmZvOiBHZW5lcmF0ZXJJbmZvQ2h1bmspOiBCdWZmZXJUZXh0dXJlIHtcbiAgICBjb25zdCByZWN0ID0gdGhpcy5QYXJlbnRSZW5kZXJSZWN0YW5nbGU7XG4gICAgY29uc3Qgd2lkdGggPSByZWN0LldpZHRoLCBoZWlnaHQgPSByZWN0LkhlaWdodDtcbiAgICBsZXQgZWxlbWVudExheW91dDogbnVtYmVyO1xuICAgIHRleEluZm9bXCJsYXlvdXRcIl0gPSB0ZXhJbmZvW1wibGF5b3V0XCJdIHx8IFwiUkdCQVwiO1xuICAgIGVsZW1lbnRMYXlvdXQgPSBHTEVudW1QYXJzZXIucGFyc2VUZXh0dXJlTGF5b3V0KHRleEluZm9bXCJsYXlvdXRcIl0pO1xuICAgIGxldCBlbGVtZW50Rm9ybWF0OiBudW1iZXI7XG4gICAgdGV4SW5mb1tcImZvcm1hdFwiXSA9IHRleEluZm9bXCJmb3JtYXRcIl0gfHwgXCJVQllURVwiO1xuICAgIGVsZW1lbnRGb3JtYXQgPSBHTEVudW1QYXJzZXIucGFyc2VUZXh0dXJlRm9ybWF0KHRleEluZm9bXCJmb3JtYXRcIl0pO1xuICAgIGNvbnN0IHJtID0gSlRocmVlQ29udGV4dC5nZXRDb250ZXh0Q29tcG9uZW50PFJlc291cmNlTWFuYWdlcj4oQ29udGV4dENvbXBvbmVudHMuUmVzb3VyY2VNYW5hZ2VyKTtcbiAgICBjb25zdCByZXNvdXJjZSA9IHJtLmNyZWF0ZVRleHR1cmUodGhpcy5fX3BhcmVudFJlbmRlcmVyLklEICsgXCIuXCIgKyB0ZXhJbmZvLm5hbWUsIHdpZHRoLCBoZWlnaHQsIGVsZW1lbnRMYXlvdXQsIGVsZW1lbnRGb3JtYXQpO1xuICAgIHRoaXMuX19wYXJlbnRSZW5kZXJlci5vbihcInJlc2l6ZVwiLCAoczogUmVjdGFuZ2xlKSA9PiB7XG4gICAgICBjb25zdCBidWZUZXggPSA8QnVmZmVyVGV4dHVyZT5yZXNvdXJjZTtcbiAgICAgIGlmIChzLldpZHRoICE9PSBidWZUZXguV2lkdGggfHwgcy5IZWlnaHQgIT09IGJ1ZlRleC5IZWlnaHQpIHtcbiAgICAgICAgKDxCdWZmZXJUZXh0dXJlPnJlc291cmNlKS5yZXNpemUocy5XaWR0aCwgcy5IZWlnaHQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXNvdXJjZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJlckZpdDtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

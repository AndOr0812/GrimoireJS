import ContextSafeContainer from "../ContextSafeResourceContainer";
import ProgramWrapper from "./ProgramWrapper";
class Program extends ContextSafeContainer {
    constructor() {
        super();
        this._attachedShaders = [];
        this.__initializeForFirst();
    }
    static createProgram(attachShaders) {
        const program = new Program();
        program._attachedShaders = attachShaders;
        return program;
    }
    get AttachedShaders() {
        return this._attachedShaders;
    }
    attachShader(shader) {
        this._attachedShaders.push(shader);
        shader.onUpdate(() => {
            this._relinkShader();
        });
    }
    __createWrapperForCanvas(canvas) {
        return new ProgramWrapper(this, canvas);
    }
    uniformExists(valName) {
        if (this.wrappers.length > 0) {
            return this.wrappers[0].uniformExists(valName);
        }
        throw new Error("Any program was not initialized!");
    }
    _relinkShader() {
        this.each((v) => {
            v.relink();
        });
    }
}
export default Program;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvcmUvUmVzb3VyY2VzL1Byb2dyYW0vUHJvZ3JhbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiT0FBTyxvQkFBb0IsTUFBTSxpQ0FBaUM7T0FHM0QsY0FBYyxNQUFNLGtCQUFrQjtBQUU3QyxzQkFBc0Isb0JBQW9CO0lBQ3hDO1FBQ0UsT0FBTyxDQUFDO1FBS0YscUJBQWdCLEdBQWEsRUFBRSxDQUFDO1FBSnRDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0lBQzlCLENBQUM7SUFLRCxPQUFjLGFBQWEsQ0FBQyxhQUF1QjtRQUNqRCxNQUFNLE9BQU8sR0FBWSxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQ3ZDLE9BQU8sQ0FBQyxnQkFBZ0IsR0FBRyxhQUFhLENBQUM7UUFDekMsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNqQixDQUFDO0lBRUQsSUFBVyxlQUFlO1FBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7SUFDL0IsQ0FBQztJQUVNLFlBQVksQ0FBQyxNQUFjO1FBQ2hDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkMsTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUNkLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN2QixDQUFDLENBQUMsQ0FBQztJQUVMLENBQUM7SUFFUyx3QkFBd0IsQ0FBQyxNQUFjO1FBQy9DLE1BQU0sQ0FBQyxJQUFJLGNBQWMsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVNLGFBQWEsQ0FBQyxPQUFlO1FBQ2xDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDN0IsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2pELENBQUM7UUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVPLGFBQWE7UUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDVixDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDYixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7QUFDSCxDQUFDO0FBRUQsZUFBZSxPQUFPLENBQUMiLCJmaWxlIjoiQ29yZS9SZXNvdXJjZXMvUHJvZ3JhbS9Qcm9ncmFtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbnRleHRTYWZlQ29udGFpbmVyIGZyb20gXCIuLi9Db250ZXh0U2FmZVJlc291cmNlQ29udGFpbmVyXCI7XG5pbXBvcnQgU2hhZGVyIGZyb20gXCIuLi9TaGFkZXIvU2hhZGVyXCI7XG5pbXBvcnQgQ2FudmFzIGZyb20gXCIuLi8uLi9DYW52YXMvQ2FudmFzXCI7XG5pbXBvcnQgUHJvZ3JhbVdyYXBwZXIgZnJvbSBcIi4vUHJvZ3JhbVdyYXBwZXJcIjtcblxuY2xhc3MgUHJvZ3JhbSBleHRlbmRzIENvbnRleHRTYWZlQ29udGFpbmVyPFByb2dyYW1XcmFwcGVyPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX2luaXRpYWxpemVGb3JGaXJzdCgpO1xuICB9XG5cblxuICBwcml2YXRlIF9hdHRhY2hlZFNoYWRlcnM6IFNoYWRlcltdID0gW107XG5cbiAgcHVibGljIHN0YXRpYyBjcmVhdGVQcm9ncmFtKGF0dGFjaFNoYWRlcnM6IFNoYWRlcltdKTogUHJvZ3JhbSB7XG4gICAgY29uc3QgcHJvZ3JhbTogUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKCk7XG4gICAgcHJvZ3JhbS5fYXR0YWNoZWRTaGFkZXJzID0gYXR0YWNoU2hhZGVycztcbiAgICByZXR1cm4gcHJvZ3JhbTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgQXR0YWNoZWRTaGFkZXJzKCk6IFNoYWRlcltdIHtcbiAgICByZXR1cm4gdGhpcy5fYXR0YWNoZWRTaGFkZXJzO1xuICB9XG5cbiAgcHVibGljIGF0dGFjaFNoYWRlcihzaGFkZXI6IFNoYWRlcik6IHZvaWQge1xuICAgIHRoaXMuX2F0dGFjaGVkU2hhZGVycy5wdXNoKHNoYWRlcik7XG4gICAgc2hhZGVyLm9uVXBkYXRlKCgpID0+IHtcbiAgICAgIHRoaXMuX3JlbGlua1NoYWRlcigpO1xuICAgIH0pO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgX19jcmVhdGVXcmFwcGVyRm9yQ2FudmFzKGNhbnZhczogQ2FudmFzKTogUHJvZ3JhbVdyYXBwZXIge1xuICAgIHJldHVybiBuZXcgUHJvZ3JhbVdyYXBwZXIodGhpcywgY2FudmFzKTtcbiAgfVxuXG4gIHB1YmxpYyB1bmlmb3JtRXhpc3RzKHZhbE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLndyYXBwZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB0aGlzLndyYXBwZXJzWzBdLnVuaWZvcm1FeGlzdHModmFsTmFtZSk7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihcIkFueSBwcm9ncmFtIHdhcyBub3QgaW5pdGlhbGl6ZWQhXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVsaW5rU2hhZGVyKCk6IHZvaWQge1xuICAgIHRoaXMuZWFjaCgodikgPT4ge1xuICAgICAgdi5yZWxpbmsoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQcm9ncmFtO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

import LightBase from "../LightBase";
import BasicMaterial from "../../../Materials/Base/BasicMaterial";
import Vector3 from "../../../../Math/Vector3";
import Matrix from "../../../../Math/Matrix";
import ContextComponents from "../../../../ContextComponents";
import JThreeContext from "../../../../JThreeContext";
/**
 * Provides directional light feature.
 */
class DirectionalLight extends LightBase {
    constructor() {
        super();
        this.bias = 0.2;
        this.Geometry = JThreeContext.getContextComponent(ContextComponents.PrimitiveRegistory).getPrimitive("quad");
        const diffuseMaterial = new BasicMaterial(require("../../../Materials/BuiltIn/Light/Diffuse/DirectionalLight.html"));
        diffuseMaterial.on("apply", (matArg) => {
            diffuseMaterial.materialVariables = {
                lightColor: this.Color.toVector().multiplyWith(this.intensity),
                lightDirection: Vector3.normalize(Matrix.transformNormal(matArg.renderStage.Renderer.Camera.viewMatrix, this.__transformer.forward))
            };
        });
        const specularMaterial = new BasicMaterial(require("../../../Materials/BuiltIn/Light/Specular/DirectionalLight.html"));
        specularMaterial.on("apply", (matArg) => {
            specularMaterial.materialVariables = {
                lightColor: this.Color.toVector().multiplyWith(this.intensity),
                lightDirection: Vector3.normalize(Matrix.transformNormal(matArg.renderStage.Renderer.Camera.viewMatrix, this.__transformer.forward))
            };
        });
        this.addMaterial(diffuseMaterial);
        this.addMaterial(specularMaterial);
    }
}
export default DirectionalLight;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvcmUvU2NlbmVPYmplY3RzL0xpZ2h0L0ltcGwvRGlyZWN0aW9uYWxMaWdodC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiT0FDTyxTQUFTLE1BQU0sY0FBYztPQUM3QixhQUFhLE1BQU0sdUNBQXVDO09BRTFELE9BQU8sTUFBTSwwQkFBMEI7T0FDdkMsTUFBTSxNQUFNLHlCQUF5QjtPQUNyQyxpQkFBaUIsTUFBTSwrQkFBK0I7T0FDdEQsYUFBYSxNQUFNLDJCQUEyQjtBQUVyRDs7R0FFRztBQUNILCtCQUErQixTQUFTO0lBQ3RDO1FBQ0UsT0FBTyxDQUFDO1FBZ0tILFNBQUksR0FBVyxHQUFHLENBQUM7UUEvSnhCLElBQUksQ0FBQyxRQUFRLEdBQUcsYUFBYSxDQUFDLG1CQUFtQixDQUFxQixpQkFBaUIsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqSSxNQUFNLGVBQWUsR0FBRyxJQUFJLGFBQWEsQ0FBQyxPQUFPLENBQUMsZ0VBQWdFLENBQUMsQ0FBQyxDQUFDO1FBQ3JILGVBQWUsQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUMsTUFBOEI7WUFDekQsZUFBZSxDQUFDLGlCQUFpQixHQUFHO2dCQUNsQyxVQUFVLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztnQkFDOUQsY0FBYyxFQUFFLE9BQU8sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDckksQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLGFBQWEsQ0FBQyxPQUFPLENBQUMsaUVBQWlFLENBQUMsQ0FBQyxDQUFDO1FBQ3ZILGdCQUFnQixDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxNQUE4QjtZQUMxRCxnQkFBZ0IsQ0FBQyxpQkFBaUIsR0FBRztnQkFDbkMsVUFBVSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7Z0JBQzlELGNBQWMsRUFBRSxPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2FBQ3JJLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxXQUFXLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7QUErSUgsQ0FBQztBQUVELGVBQWUsZ0JBQWdCLENBQUMiLCJmaWxlIjoiQ29yZS9TY2VuZU9iamVjdHMvTGlnaHQvSW1wbC9EaXJlY3Rpb25hbExpZ2h0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IElBcHBseU1hdGVyaWFsQXJndW1lbnQgZnJvbSBcIi4uLy4uLy4uL01hdGVyaWFscy9CYXNlL0lBcHBseU1hdGVyaWFsQXJndW1lbnRcIjtcbmltcG9ydCBMaWdodEJhc2UgZnJvbSBcIi4uL0xpZ2h0QmFzZVwiO1xuaW1wb3J0IEJhc2ljTWF0ZXJpYWwgZnJvbSBcIi4uLy4uLy4uL01hdGVyaWFscy9CYXNlL0Jhc2ljTWF0ZXJpYWxcIjtcbmltcG9ydCBQcmltaXRpdmVSZWdpc3RvcnkgZnJvbSBcIi4uLy4uLy4uL0dlb21ldHJpZXMvQmFzZS9QcmltaXRpdmVSZWdpc3RvcnlcIjtcbmltcG9ydCBWZWN0b3IzIGZyb20gXCIuLi8uLi8uLi8uLi9NYXRoL1ZlY3RvcjNcIjtcbmltcG9ydCBNYXRyaXggZnJvbSBcIi4uLy4uLy4uLy4uL01hdGgvTWF0cml4XCI7XG5pbXBvcnQgQ29udGV4dENvbXBvbmVudHMgZnJvbSBcIi4uLy4uLy4uLy4uL0NvbnRleHRDb21wb25lbnRzXCI7XG5pbXBvcnQgSlRocmVlQ29udGV4dCBmcm9tIFwiLi4vLi4vLi4vLi4vSlRocmVlQ29udGV4dFwiO1xuXG4vKipcbiAqIFByb3ZpZGVzIGRpcmVjdGlvbmFsIGxpZ2h0IGZlYXR1cmUuXG4gKi9cbmNsYXNzIERpcmVjdGlvbmFsTGlnaHQgZXh0ZW5kcyBMaWdodEJhc2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuR2VvbWV0cnkgPSBKVGhyZWVDb250ZXh0LmdldENvbnRleHRDb21wb25lbnQ8UHJpbWl0aXZlUmVnaXN0b3J5PihDb250ZXh0Q29tcG9uZW50cy5QcmltaXRpdmVSZWdpc3RvcnkpLmdldFByaW1pdGl2ZShcInF1YWRcIik7XG4gICAgY29uc3QgZGlmZnVzZU1hdGVyaWFsID0gbmV3IEJhc2ljTWF0ZXJpYWwocmVxdWlyZShcIi4uLy4uLy4uL01hdGVyaWFscy9CdWlsdEluL0xpZ2h0L0RpZmZ1c2UvRGlyZWN0aW9uYWxMaWdodC5odG1sXCIpKTtcbiAgICBkaWZmdXNlTWF0ZXJpYWwub24oXCJhcHBseVwiLCAobWF0QXJnOiBJQXBwbHlNYXRlcmlhbEFyZ3VtZW50KSA9PiB7XG4gICAgICBkaWZmdXNlTWF0ZXJpYWwubWF0ZXJpYWxWYXJpYWJsZXMgPSB7XG4gICAgICAgIGxpZ2h0Q29sb3I6IHRoaXMuQ29sb3IudG9WZWN0b3IoKS5tdWx0aXBseVdpdGgodGhpcy5pbnRlbnNpdHkpLFxuICAgICAgICBsaWdodERpcmVjdGlvbjogVmVjdG9yMy5ub3JtYWxpemUoTWF0cml4LnRyYW5zZm9ybU5vcm1hbChtYXRBcmcucmVuZGVyU3RhZ2UuUmVuZGVyZXIuQ2FtZXJhLnZpZXdNYXRyaXgsIHRoaXMuX190cmFuc2Zvcm1lci5mb3J3YXJkKSlcbiAgICAgIH07XG4gICAgfSk7XG4gICAgY29uc3Qgc3BlY3VsYXJNYXRlcmlhbCA9IG5ldyBCYXNpY01hdGVyaWFsKHJlcXVpcmUoXCIuLi8uLi8uLi9NYXRlcmlhbHMvQnVpbHRJbi9MaWdodC9TcGVjdWxhci9EaXJlY3Rpb25hbExpZ2h0Lmh0bWxcIikpO1xuICAgIHNwZWN1bGFyTWF0ZXJpYWwub24oXCJhcHBseVwiLCAobWF0QXJnOiBJQXBwbHlNYXRlcmlhbEFyZ3VtZW50KSA9PiB7XG4gICAgICBzcGVjdWxhck1hdGVyaWFsLm1hdGVyaWFsVmFyaWFibGVzID0ge1xuICAgICAgICBsaWdodENvbG9yOiB0aGlzLkNvbG9yLnRvVmVjdG9yKCkubXVsdGlwbHlXaXRoKHRoaXMuaW50ZW5zaXR5KSxcbiAgICAgICAgbGlnaHREaXJlY3Rpb246IFZlY3RvcjMubm9ybWFsaXplKE1hdHJpeC50cmFuc2Zvcm1Ob3JtYWwobWF0QXJnLnJlbmRlclN0YWdlLlJlbmRlcmVyLkNhbWVyYS52aWV3TWF0cml4LCB0aGlzLl9fdHJhbnNmb3JtZXIuZm9yd2FyZCkpXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHRoaXMuYWRkTWF0ZXJpYWwoZGlmZnVzZU1hdGVyaWFsKTtcbiAgICB0aGlzLmFkZE1hdGVyaWFsKHNwZWN1bGFyTWF0ZXJpYWwpO1xuICB9XG5cblxuICAvLyBwdWJsaWMgZ2V0UGFyYW1ldGVycyhyZW5kZXJlcjogQmFzaWNSZW5kZXJlciwgc2hhZG93TWFwSW5kZXg/OiBudW1iZXIpOiBudW1iZXJbXSB7XG4gIC8vICAgdmFyIGRpciA9IFZlY3RvcjMubm9ybWFsaXplKE1hdHJpeC50cmFuc2Zvcm1Ob3JtYWwocmVuZGVyZXIuQ2FtZXJhLnZpZXdNYXRyaXgsIHRoaXMudHJhbnNmb3JtZXIuZm9yd2FyZCkpO1xuXHRcdC8vIFx0XHR2YXIgZGVidWcgPSBKVGhyZWVDb250ZXh0LmdldENvbnRleHRDb21wb25lbnQ8RGVidWdnZXI+KENvbnRleHRDb21wb25lbnRzLkRlYnVnZ2VyKTtcblx0XHQvLyBcdFx0ZGVidWcuc2V0SW5mbyhcImxEaXJcIiwgZGlyLnRvU3RyaW5nKCkpO1xuICAvLyAgIHJldHVybiBbdGhpcy5Db2xvci5SICogdGhpcy5pbnRlbnNpdHksIHRoaXMuQ29sb3IuRyAqIHRoaXMuaW50ZW5zaXR5LCB0aGlzLkNvbG9yLkIgKiB0aGlzLmludGVuc2l0eSxcbiAgLy8gICAgIGRpci5YLCBkaXIuWSwgZGlyLlosIDAsXG4gIC8vICAgICB0aGlzLmlzU2hhZG93RHJvcHBhYmxlID8gMSA6IDAsIHNoYWRvd01hcEluZGV4LCB0aGlzLmJpYXNdO1xuICAvLyB9XG4gIC8vXG5cdFx0Ly8gcHJpdmF0ZSBzaGFkb3dQcm9qZWN0aW9uTWF0cml4Q2FjaGU6IE1hdHJpeCA9IE1hdHJpeC56ZXJvKCk7XG4gIC8vXG5cdFx0Ly8gcHJpdmF0ZSBzaGFkb3dWaWV3TWF0cml4Q2FjaGU6IE1hdHJpeCA9IE1hdHJpeC56ZXJvKCk7XG4gIC8vXG5cdFx0Ly8gcHJpdmF0ZSBzaGFkb3dNYXRyaXhDYWNoZTogTWF0cml4ID0gTWF0cml4Lnplcm8oKTtcbiAgLy9cblx0XHQvLyBwcml2YXRlIG5lYXJDbGlwOiBudW1iZXIgPSAwLjE7XG4gIC8vXG4gIC8vIC8qKlxuICAvLyAgKiBDYWxjdWxhdGUgdXAgdmVjdG9yIG9mIGxpZ2h0IHZpZXcuXG4gIC8vICAqL1xuXHRcdC8vIHByaXZhdGUgY29tcHV0ZVVwVmVjdG9yKHZpZXdEaXI6IFZlY3RvcjMsIGxpZ2h0RGlyOiBWZWN0b3IzKTogVmVjdG9yMyB7XG4gIC8vICAgdmFyIGxlZnQgPSBWZWN0b3IzLmNyb3NzKGxpZ2h0RGlyLCB2aWV3RGlyKTtcbiAgLy8gICB2YXIgdXAgPSBWZWN0b3IzLmNyb3NzKGxlZnQsIGxpZ2h0RGlyKTtcbiAgLy8gICByZXR1cm4gdXA7XG5cdFx0Ly8gfVxuICAvL1xuXHRcdC8vIHByaXZhdGUgY29tcHV0ZVBlcnNwZWN0aXZlKG46IG51bWJlciwgZjogbnVtYmVyKSB7XG4gIC8vICAgdmFyIG0gPSBNYXRyaXguaWRlbnRpdHkoKTtcbiAgLy8gICBtLnJhd0VsZW1lbnRzWzVdID0gKGYgKyBuKSAvIChmIC0gbik7XHRcdC8vIFsgMSAwIDAgMF1cbiAgLy8gICBtLnJhd0VsZW1lbnRzWzEzXSA9IC0yICogZiAqIG4gLyAoZiAtIG4pO1x0XHQvLyBbIDAgYSAwIGJdXG4gIC8vICAgbS5yYXdFbGVtZW50c1s3XSA9IDE7XHRcdFx0XHQvLyBbIDAgMCAxIDBdXG4gIC8vICAgbS5yYXdFbGVtZW50c1sxNV0gPSAwO1xuICAvLyAgIHJldHVybiBtO1xuXHRcdC8vIH1cbiAgLy9cblx0XHQvLyBwdWJsaWMgdXBkYXRlTGlnaHRNYXRyaWNpcyhyZW5kZXJlcjogQmFzaWNSZW5kZXJlcikge1xuICAvLyAgIC8vY2FtLlRyYW5zZm9ybWVyLmZvcndhcmQgLT4gdmlld0RpcmVjdGlvblxuICAvLyAgIC8vdGhpcy5UcmFuc2Zvcm1lci5mb3J3YXJkIC0+IGxpZ2h0RGlyZWN0aW9uXG4gIC8vICAgdmFyIGNhbTogQ2FtZXJhID0gcmVuZGVyZXIuQ2FtZXJhO1xuICAvLyAgIHRoaXMuZ2VuZXJhdGVMaWdodHZpZXdNYXRyaXgocmVuZGVyZXIuQ2FtZXJhKTtcbiAgLy8gICB0aGlzLlVTTShyZW5kZXJlcik7XG4gIC8vICAgLy90aGlzLnVwZGF0ZUxpZ2h0UHJvamVjdGlvbihyZW5kZXJlcixNYXRyaXgub3J0aG8oLTEwLDEwLC0xMCwxMCwwLjEsMzApLE1hdHJpeC5sb29rQXQobmV3IFZlY3RvcjMoMCwwLDIwKSxuZXcgVmVjdG9yMygwLDAsMCksbmV3IFZlY3RvcjMoMCwxLDApKSk7XG4gIC8vICAgZ2xtLm1hdDQubXVsKHRoaXMuc2hhZG93TWF0cml4Q2FjaGUucmF3RWxlbWVudHMsIE1hdHJpeC5zY2FsZShuZXcgVmVjdG9yMygxLCAxLCAtMSkpLnJhd0VsZW1lbnRzLCB0aGlzLnNoYWRvd01hdHJpeENhY2hlLnJhd0VsZW1lbnRzKTtcblx0XHQvLyBcdCB0aGlzLnVwZGF0ZUxpZ2h0UHJvamVjdGlvbihyZW5kZXJlciwgdGhpcy5zaGFkb3dNYXRyaXhDYWNoZSk7XG5cdFx0Ly8gfVxuICAvL1xuXHRcdC8vIHByaXZhdGUgTGlTUFNNKHJlbmRlcmVyOiBCYXNpY1JlbmRlcmVyKSB7XG4gIC8vICAgdmFyIGNhbSA9IHJlbmRlcmVyLkNhbWVyYTtcbiAgLy8gICB2YXIgdmlld0RpcmVjdGlvbiA9IGNhbS5UcmFuc2Zvcm1lci5mb3J3YXJkO1xuICAvLyAgIHZhciBsaWdodERpcmVjdGlvbiA9IHRoaXMudHJhbnNmb3JtZXIuZm9yd2FyZDtcbiAgLy8gICB2YXIgZXllUG9zaXRpb24gPSBjYW0uVHJhbnNmb3JtZXIuR2xvYmFsUG9zaXRpb247XG4gIC8vICAgdmFyIGFuZ2xlOiBudW1iZXIgPSBWZWN0b3IzLmFuZ2xlKHZpZXdEaXJlY3Rpb24sIGxpZ2h0RGlyZWN0aW9uKTtcbiAgLy8gICAvL2NoZWNrIHdoZXRoZXIgbmVlZHMgVVNNIG9yIExpU1BTTSBoZXJlLlxuICAvLyAgIGlmIChhbmdsZSA9PSAwIHx8IGFuZ2xlID09IE1hdGguUEkpIHtcbiAgLy8gICAgIHRoaXMuVVNNKHJlbmRlcmVyKTtcbiAgLy8gICAgIHJldHVybjtcbiAgLy8gICB9XG4gIC8vICAgdmFyIHNpbkdhbW1hOiBudW1iZXIgPSBNYXRoLmFicyhNYXRoLnNpbihhbmdsZSkpO1xuICAvL1xuICAvLyAgIC8vQ29tcHV0aW5nIGxpZ2h0IHZpZXcgbWF0cml4XG4gIC8vICAgdmFyIHVwOiBWZWN0b3IzID0gdGhpcy5jb21wdXRlVXBWZWN0b3Iodmlld0RpcmVjdGlvbiwgbGlnaHREaXJlY3Rpb24pO1xuICAvLyAgIHZhciBsdjogTWF0cml4ID0gTWF0cml4Lmxvb2tBdChleWVQb3NpdGlvbiwgVmVjdG9yMy5hZGQoZXllUG9zaXRpb24sIGxpZ2h0RGlyZWN0aW9uKSwgdXApO1xuICAvL1xuICAvLyAgIC8vQ29tcHV0ZSBBQUJCIG9mIGNhbWVyYSBmcnVzdXR1bSBpbiBsaWdodCB2aWV3IHNwYWNlXG4gIC8vICAgdmFyIHBsID0gbmV3IFBvaW50TGlzdChjYW0uZnJ1c3R1bVBvaW50cyk7XG4gIC8vICAgcGwudHJhbnNmb3JtKGx2KTtcbiAgLy8gICB2YXIgdmZBQUJCID0gcGwuZ2V0Qm91bmRpbmdCb3goKTtcbiAgLy8gICAvL0NvbXB1dGUgbmV3IGZydXN0dW1cbiAgLy8gICB2YXIgZmFjdG9yID0gMSAvIHNpbkdhbW1hO1xuICAvLyAgIHZhciB6X24gPSB0aGlzLm5lYXJDbGlwICogZmFjdG9yO1xuICAvLyAgIHZhciBkID0gTWF0aC5hYnModmZBQUJCLnBvaW50UlROLlkgLSB2ZkFBQkIucG9pbnRMQkYuWSk7XG4gIC8vICAgdmFyIHpfZiA9IHpfbiAqIGQgKiBzaW5HYW1tYTtcbiAgLy8gICB2YXIgbiA9ICh6X24gKyBNYXRoLnNxcnQoel9mICogel9uKSkgLyBzaW5HYW1tYTtcbiAgLy8gICB2YXIgZiA9IG4gKyBkO1xuICAvLyAgIC8vQ29tcHV0ZSBuZXcgbGlnaHQgdmlld1xuICAvLyAgIHZhciBuZXdQb3MgPSBleWVQb3NpdGlvbi5zdWJ0cmFjdFdpdGgodXAubXVsdGlwbHlXaXRoKG4gLSB0aGlzLm5lYXJDbGlwKSk7XG4gIC8vICAgbHYgPSBNYXRyaXgubG9va0F0KG5ld1BvcywgVmVjdG9yMy5hZGQobmV3UG9zLCBsaWdodERpcmVjdGlvbiksIHVwKTtcbiAgLy8gICB2YXIgbHAgPSB0aGlzLmNvbXB1dGVQZXJzcGVjdGl2ZShuLCBmKTtcbiAgLy8gICAvL0NvbXB1dGUgbGlnaHQgbWF0cml4XG4gIC8vICAgdmFyIGxWUCA9IE1hdHJpeC5tdWx0aXBseShscCwgdGhpcy5zaGFkb3dWaWV3TWF0cml4Q2FjaGUpO1xuICAvL1xuICAvLyAgIHZhciBwbDIgPSBuZXcgUG9pbnRMaXN0KGNhbS5mcnVzdHVtUG9pbnRzKTtcbiAgLy8gICBwbDIudHJhbnNmb3JtKGxWUCk7XG4gIC8vICAgdmFyIHVuaXRBQUJCID0gcGwyLmdldEJvdW5kaW5nQm94KCk7XG4gIC8vICAgdmFyIHVuaXRDdWJlID0gdGhpcy5nZW5lcmF0ZVVuaXRDdWJlTWF0cml4KHVuaXRBQUJCKTtcbiAgLy8gICBnbG0ubWF0NC5tdWwodGhpcy5zaGFkb3dNYXRyaXhDYWNoZS5yYXdFbGVtZW50cywgdW5pdEN1YmUucmF3RWxlbWVudHMsIGxwLnJhd0VsZW1lbnRzKTtcblx0XHQvLyB9XG4gIC8vXG5cdFx0Ly8gcHJpdmF0ZSBnZW5lcmF0ZUxpZ2h0dmlld01hdHJpeChjYW06IENhbWVyYSkge1xuICAvLyAgIGdsbS5tYXQ0Lmxvb2tBdCh0aGlzLnNoYWRvd1ZpZXdNYXRyaXhDYWNoZS5yYXdFbGVtZW50cywgY2FtLlRyYW5zZm9ybWVyLkdsb2JhbFBvc2l0aW9uLnJhd0VsZW1lbnRzLCBWZWN0b3IzLmFkZChjYW0uVHJhbnNmb3JtZXIuR2xvYmFsUG9zaXRpb24sIHRoaXMudHJhbnNmb3JtZXIuZm9yd2FyZCkucmF3RWxlbWVudHMsIFZlY3RvcjMuWVVuaXQucmF3RWxlbWVudHMpO1xuXHRcdC8vIH1cbiAgLy9cblx0XHQvLyBwcml2YXRlIFVTTShyZW5kZXJlcjogQmFzaWNSZW5kZXJlcikvL1VuaWZvcm0gc2hhZG93IG1hcFxuXHRcdC8vIHtcbiAgLy8gICB2YXIgY2FtID0gcmVuZGVyZXIuQ2FtZXJhO1xuICAvLyAgIC8vaW5pdGlhbGl6ZSBsaWdodCBtYXRyaXggY2FjaGUgd2l0aCBsaWdodCB2aWV3XG4gIC8vICAgdmFyIGxpZ2h0U3BhY2VGcnVzdHVtID0gKG5ldyBQb2ludExpc3QoY2FtLmZydXN0dW1Qb2ludHMpKTtcbiAgLy8gICBsaWdodFNwYWNlRnJ1c3R1bS50cmFuc2Zvcm0odGhpcy5zaGFkb3dWaWV3TWF0cml4Q2FjaGUpO1xuICAvLyAgIHZhciBmcnVzdHVtQUFCQmluTGlnaHRTcGFjZSA9IGxpZ2h0U3BhY2VGcnVzdHVtLmdldEJvdW5kaW5nQm94KCk7XG4gIC8vICAgdmFyIGRlYnVnID0gSlRocmVlQ29udGV4dC5nZXRDb250ZXh0Q29tcG9uZW50PERlYnVnZ2VyPihDb250ZXh0Q29tcG9uZW50cy5EZWJ1Z2dlcik7XG4gIC8vICAgZGVidWcuc2V0SW5mbyhcIlJUTlwiLCBmcnVzdHVtQUFCQmluTGlnaHRTcGFjZS5wb2ludFJUTi50b1N0cmluZygpKTtcbiAgLy8gICBkZWJ1Zy5zZXRJbmZvKFwiTEJGXCIsIGZydXN0dW1BQUJCaW5MaWdodFNwYWNlLnBvaW50TEJGLnRvU3RyaW5nKCkpO1xuICAvLyAgIHRoaXMuc2hhZG93UHJvamVjdGlvbk1hdHJpeENhY2hlID0gdGhpcy5nZW5lcmF0ZVVuaXRDdWJlTWF0cml4KGZydXN0dW1BQUJCaW5MaWdodFNwYWNlKTtcbiAgLy8gICBnbG0ubWF0NC5tdWwodGhpcy5zaGFkb3dNYXRyaXhDYWNoZS5yYXdFbGVtZW50cywgdGhpcy5zaGFkb3dQcm9qZWN0aW9uTWF0cml4Q2FjaGUucmF3RWxlbWVudHMsIHRoaXMuc2hhZG93Vmlld01hdHJpeENhY2hlLnJhd0VsZW1lbnRzKTtcblx0XHQvLyB9XG4gIC8vXG5cdFx0Ly8gcHJpdmF0ZSBnZW5lcmF0ZVVuaXRDdWJlTWF0cml4KGFsaWduOiBBQUJCKSB7XG4gIC8vICAgLypcbiAgLy8gICAgIHJlc3VsdC5fMTEgPSAyLjBmIC8gKCBtYXgueCAtIG1pbi54ICk7XG4gIC8vICAgICByZXN1bHQuXzIxID0gMC4wZjtcbiAgLy8gICAgIHJlc3VsdC5fMzEgPSAwLjBmO1xuICAvLyAgICAgcmVzdWx0Ll80MSA9IC0oIG1heC54ICsgbWluLnggKSAvICggbWF4LnggLSBtaW4ueCApO1xuICAvL1xuICAvLyAgICAgcmVzdWx0Ll8xMiA9IDAuMGY7XG4gIC8vICAgICByZXN1bHQuXzIyID0gMi4wZiAvICggbWF4LnkgLSBtaW4ueSApO1xuICAvLyAgICAgcmVzdWx0Ll8zMiA9IDAuMGY7XG4gIC8vICAgICByZXN1bHQuXzQyID0gLSggbWF4LnkgKyBtaW4ueSApIC8gKCBtYXgueSAtIG1pbi55ICk7XG4gIC8vXG4gIC8vICAgICByZXN1bHQuXzEzID0gMC4wZjtcbiAgLy8gICAgIHJlc3VsdC5fMjMgPSAwLjBmO1xuICAvLyAgICAgcmVzdWx0Ll8zMyA9IDEuMGYgLyAoIG1heC56IC0gbWluLnogKTtcbiAgLy8gICAgIHJlc3VsdC5fNDMgPSAtIG1pbi56IC8gKCBtYXgueiAtIG1pbi56ICk7XG4gIC8vXG4gIC8vICAgICByZXN1bHQuXzE0ID0gMC4wZjtcbiAgLy8gICAgIHJlc3VsdC5fMjQgPSAwLjBmO1xuICAvLyAgICAgcmVzdWx0Ll8zNCA9IDAuMGY7XG4gIC8vICAgICByZXN1bHQuXzQ0ID0gMS4wZjtcbiAgLy8gICAgKi9cbiAgLy8gICAvL3JldHVybiBNYXRyaXgub3J0aG8oYWxpZ24ucG9pbnRMQkYuWCxhbGlnbi5wb2ludFJUTi5YLGFsaWduLnBvaW50TEJGLlksYWxpZ24ucG9pbnRSVE4uWSxhbGlnbi5wb2ludFJUTi5aLGFsaWduLnBvaW50TEJGLlopO1xuICAvLyAgIHJldHVybiBNYXRyaXguZnJvbUVsZW1lbnRzKFxuICAvLyAgICAgMi4wIC8gKGFsaWduLnBvaW50UlROLlggLSBhbGlnbi5wb2ludExCRi5YKSwgMCwgMCwgLShhbGlnbi5wb2ludFJUTi5YICsgYWxpZ24ucG9pbnRMQkYuWCkgLyAoYWxpZ24ucG9pbnRSVE4uWCAtIGFsaWduLnBvaW50TEJGLlgpLFxuICAvLyAgICAgMCwgMi4wIC8gKGFsaWduLnBvaW50UlROLlkgLSBhbGlnbi5wb2ludExCRi5ZKSwgMCwgLShhbGlnbi5wb2ludFJUTi5ZICsgYWxpZ24ucG9pbnRMQkYuWSkgLyAoYWxpZ24ucG9pbnRSVE4uWSAtIGFsaWduLnBvaW50TEJGLlkpLFxuICAvLyAgICAgMCwgMCwgMi4wIC8gKGFsaWduLnBvaW50UlROLlogLSBhbGlnbi5wb2ludExCRi5aKSwgKGFsaWduLnBvaW50UlROLlogKyBhbGlnbi5wb2ludExCRi5aKSAvIChhbGlnbi5wb2ludExCRi5aIC0gYWxpZ24ucG9pbnRSVE4uWiksXG4gIC8vICAgICAwLCAwLCAwLCAxLjBcbiAgLy8gICAgICk7XG5cdFx0Ly8gfVxuXG4gIHB1YmxpYyBpbnRlbnNpdHk6IG51bWJlcjtcblxuICBwdWJsaWMgYmlhczogbnVtYmVyID0gMC4yO1xufVxuXG5leHBvcnQgZGVmYXVsdCBEaXJlY3Rpb25hbExpZ2h0O1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

import MaterialNodeBase from "./MaterialNodeBase";
class MaterialNode extends MaterialNodeBase {
    constructor() {
        super();
        this.attributes.defineAttribute({
            "type": {
                value: "builtin.phong",
                converter: "string",
                onchanged: this._onTypeAttrChanged,
            }
        });
    }
    __onMount() {
        super.__onMount();
    }
    _onTypeAttrChanged(attr) {
        let material = this.__getMaterialFromMatName(attr.Value);
        if (material) {
            this.__setMaterial(material, () => {
                attr.done();
            });
        }
        else {
            this.nodeImport("jthree.import", `material-${attr.Value}`, (node) => {
                if (node) {
                    material = this.__getMaterialFromMatName(attr.Value);
                    this.__setMaterial(material, () => {
                        attr.done();
                    });
                }
            });
        }
    }
}
export default MaterialNode;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdvbWwvTm9kZXMvTWF0ZXJpYWxzL01hdGVyaWFsTm9kZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiT0FBTyxnQkFBZ0IsTUFBTSxvQkFBb0I7QUFLakQsMkJBQTJCLGdCQUFnQjtJQUN6QztRQUNFLE9BQU8sQ0FBQztRQUNSLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDO1lBQzlCLE1BQU0sRUFBRTtnQkFDTixLQUFLLEVBQUUsZUFBZTtnQkFDdEIsU0FBUyxFQUFFLFFBQVE7Z0JBQ25CLFNBQVMsRUFBRSxJQUFJLENBQUMsa0JBQWtCO2FBQ25DO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVTLFNBQVM7UUFDakIsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFTyxrQkFBa0IsQ0FBQyxJQUFtQjtRQUM1QyxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pELEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDYixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRTtnQkFDM0IsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2QsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsRUFBRSxZQUFZLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQXNCO2dCQUNoRixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUNULFFBQVEsR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNyRCxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRTt3QkFDM0IsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO29CQUNkLENBQUMsQ0FBQyxDQUFDO2dCQUNMLENBQUM7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQztBQUVELGVBQWUsWUFBWSxDQUFDIiwiZmlsZSI6IkdvbWwvTm9kZXMvTWF0ZXJpYWxzL01hdGVyaWFsTm9kZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNYXRlcmlhbE5vZGVCYXNlIGZyb20gXCIuL01hdGVyaWFsTm9kZUJhc2VcIjtcbmltcG9ydCBNYXRlcmlhbCBmcm9tIFwiLi4vLi4vLi4vQ29yZS9NYXRlcmlhbHMvTWF0ZXJpYWxcIjtcbmltcG9ydCBHb21sQXR0cmlidXRlIGZyb20gXCIuLi8uLi9Hb21sQXR0cmlidXRlXCI7XG5pbXBvcnQgR29tbFRyZWVOb2RlQmFzZSBmcm9tIFwiLi4vLi4vR29tbFRyZWVOb2RlQmFzZVwiO1xuXG5jbGFzcyBNYXRlcmlhbE5vZGUgZXh0ZW5kcyBNYXRlcmlhbE5vZGVCYXNlPE1hdGVyaWFsPiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hdHRyaWJ1dGVzLmRlZmluZUF0dHJpYnV0ZSh7XG4gICAgICBcInR5cGVcIjoge1xuICAgICAgICB2YWx1ZTogXCJidWlsdGluLnBob25nXCIsXG4gICAgICAgIGNvbnZlcnRlcjogXCJzdHJpbmdcIixcbiAgICAgICAgb25jaGFuZ2VkOiB0aGlzLl9vblR5cGVBdHRyQ2hhbmdlZCxcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfX29uTW91bnQoKTogdm9pZCB7XG4gICAgc3VwZXIuX19vbk1vdW50KCk7XG4gIH1cblxuICBwcml2YXRlIF9vblR5cGVBdHRyQ2hhbmdlZChhdHRyOiBHb21sQXR0cmlidXRlKTogdm9pZCB7XG4gICAgbGV0IG1hdGVyaWFsID0gdGhpcy5fX2dldE1hdGVyaWFsRnJvbU1hdE5hbWUoYXR0ci5WYWx1ZSk7XG4gICAgaWYgKG1hdGVyaWFsKSB7XG4gICAgICB0aGlzLl9fc2V0TWF0ZXJpYWwobWF0ZXJpYWwsICgpID0+IHtcbiAgICAgICAgYXR0ci5kb25lKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ub2RlSW1wb3J0KFwianRocmVlLmltcG9ydFwiLCBgbWF0ZXJpYWwtJHthdHRyLlZhbHVlfWAsIChub2RlOiBHb21sVHJlZU5vZGVCYXNlKSA9PiB7XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgbWF0ZXJpYWwgPSB0aGlzLl9fZ2V0TWF0ZXJpYWxGcm9tTWF0TmFtZShhdHRyLlZhbHVlKTtcbiAgICAgICAgICB0aGlzLl9fc2V0TWF0ZXJpYWwobWF0ZXJpYWwsICgpID0+IHtcbiAgICAgICAgICAgIGF0dHIuZG9uZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWF0ZXJpYWxOb2RlO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

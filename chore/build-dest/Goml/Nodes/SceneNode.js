import CoreRelatedNodeBase from "../CoreRelatedNodeBase";
import Scene from "../../Core/Scene";
import JThreeContext from "../../JThreeContext";
import ContextComponents from "../../ContextComponents";
class SceneNode extends CoreRelatedNodeBase {
    constructor() {
        super();
        this.attributes.defineAttribute({
            "ambient": {
                value: "#111",
                converter: "color3",
                onchanged: this._onAmbientAttrChanged,
            },
            "name": {
                value: "",
                converter: "string",
                onchanged: this._onNameAttrChanged,
            }
        });
    }
    __onMount() {
        super.__onMount();
        let sceneName = this.attributes.getValue("name");
        if (sceneName === "") {
            sceneName = null;
        }
        this.target = new Scene(sceneName);
        JThreeContext.getContextComponent(ContextComponents.SceneManager).addScene(this.target);
    }
    _onNameAttrChanged(attr) {
        this.target.ID = attr.Value;
        attr.done();
    }
    _onAmbientAttrChanged(attr) {
        this.target.sceneAmbient = attr.Value;
        attr.done();
    }
}
export default SceneNode;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdvbWwvTm9kZXMvU2NlbmVOb2RlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJPQUFPLG1CQUFtQixNQUFNLHdCQUF3QjtPQUNqRCxLQUFLLE1BQU0sa0JBQWtCO09BQzdCLGFBQWEsTUFBTSxxQkFBcUI7T0FFeEMsaUJBQWlCLE1BQU0seUJBQXlCO0FBRXZELHdCQUF3QixtQkFBbUI7SUFDekM7UUFDRSxPQUFPLENBQUM7UUFDUixJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQztZQUM5QixTQUFTLEVBQUU7Z0JBQ1QsS0FBSyxFQUFFLE1BQU07Z0JBQ2IsU0FBUyxFQUFFLFFBQVE7Z0JBQ25CLFNBQVMsRUFBRSxJQUFJLENBQUMscUJBQXFCO2FBQ3RDO1lBQ0QsTUFBTSxFQUFFO2dCQUNOLEtBQUssRUFBRSxFQUFFO2dCQUNULFNBQVMsRUFBRSxRQUFRO2dCQUNuQixTQUFTLEVBQUUsSUFBSSxDQUFDLGtCQUFrQjthQUNuQztTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFUyxTQUFTO1FBQ2pCLEtBQUssQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUNsQixJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqRCxFQUFFLENBQUMsQ0FBQyxTQUFTLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNyQixTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ25CLENBQUM7UUFDRCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ25DLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBZSxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3hHLENBQUM7SUFFTyxrQkFBa0IsQ0FBQyxJQUFJO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2QsQ0FBQztJQUVPLHFCQUFxQixDQUFDLElBQUk7UUFDaEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztRQUN0QyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDZCxDQUFDO0FBQ0gsQ0FBQztBQUVELGVBQWUsU0FBUyxDQUFDIiwiZmlsZSI6IkdvbWwvTm9kZXMvU2NlbmVOb2RlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvcmVSZWxhdGVkTm9kZUJhc2UgZnJvbSBcIi4uL0NvcmVSZWxhdGVkTm9kZUJhc2VcIjtcbmltcG9ydCBTY2VuZSBmcm9tIFwiLi4vLi4vQ29yZS9TY2VuZVwiO1xuaW1wb3J0IEpUaHJlZUNvbnRleHQgZnJvbSBcIi4uLy4uL0pUaHJlZUNvbnRleHRcIjtcbmltcG9ydCBTY2VuZU1hbmFnZXIgZnJvbSBcIi4uLy4uL0NvcmUvU2NlbmVNYW5hZ2VyXCI7XG5pbXBvcnQgQ29udGV4dENvbXBvbmVudHMgZnJvbSBcIi4uLy4uL0NvbnRleHRDb21wb25lbnRzXCI7XG5cbmNsYXNzIFNjZW5lTm9kZSBleHRlbmRzIENvcmVSZWxhdGVkTm9kZUJhc2U8U2NlbmU+IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmF0dHJpYnV0ZXMuZGVmaW5lQXR0cmlidXRlKHtcbiAgICAgIFwiYW1iaWVudFwiOiB7XG4gICAgICAgIHZhbHVlOiBcIiMxMTFcIixcbiAgICAgICAgY29udmVydGVyOiBcImNvbG9yM1wiLFxuICAgICAgICBvbmNoYW5nZWQ6IHRoaXMuX29uQW1iaWVudEF0dHJDaGFuZ2VkLFxuICAgICAgfSxcbiAgICAgIFwibmFtZVwiOiB7XG4gICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICBjb252ZXJ0ZXI6IFwic3RyaW5nXCIsXG4gICAgICAgIG9uY2hhbmdlZDogdGhpcy5fb25OYW1lQXR0ckNoYW5nZWQsXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX19vbk1vdW50KCk6IHZvaWQge1xuICAgIHN1cGVyLl9fb25Nb3VudCgpO1xuICAgIGxldCBzY2VuZU5hbWUgPSB0aGlzLmF0dHJpYnV0ZXMuZ2V0VmFsdWUoXCJuYW1lXCIpO1xuICAgIGlmIChzY2VuZU5hbWUgPT09IFwiXCIpIHtcbiAgICAgIHNjZW5lTmFtZSA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMudGFyZ2V0ID0gbmV3IFNjZW5lKHNjZW5lTmFtZSk7XG4gICAgSlRocmVlQ29udGV4dC5nZXRDb250ZXh0Q29tcG9uZW50PFNjZW5lTWFuYWdlcj4oQ29udGV4dENvbXBvbmVudHMuU2NlbmVNYW5hZ2VyKS5hZGRTY2VuZSh0aGlzLnRhcmdldCk7XG4gIH1cblxuICBwcml2YXRlIF9vbk5hbWVBdHRyQ2hhbmdlZChhdHRyKTogdm9pZCB7XG4gICAgdGhpcy50YXJnZXQuSUQgPSBhdHRyLlZhbHVlO1xuICAgIGF0dHIuZG9uZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25BbWJpZW50QXR0ckNoYW5nZWQoYXR0cik6IHZvaWQge1xuICAgIHRoaXMudGFyZ2V0LnNjZW5lQW1iaWVudCA9IGF0dHIuVmFsdWU7XG4gICAgYXR0ci5kb25lKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2NlbmVOb2RlO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

import DirectionalLight from "../../../../Core/SceneObjects/Light/Impl/DirectionalLight";
import LightNodeBase from "./LightNodeBase";
class DirectionalLightNode extends LightNodeBase {
    constructor() {
        super();
        this.attributes.defineAttribute({
            "intensity": {
                value: 1,
                converter: "float",
                onchanged: this._onIntensityAttrChanged.bind(this),
            },
            "bias": {
                value: 0.01,
                converter: "float",
                onchanged: this._onBiasAttrChanged.bind(this),
            }
        });
        this.on("update-scene-object", (obj) => {
            this._onIntensityAttrChanged.call(this, this.attributes.getAttribute("intensity"));
            this._onBiasAttrChanged.call(this, this.attributes.getAttribute("bias"));
        });
    }
    __constructLight() {
        return new DirectionalLight();
    }
    _onIntensityAttrChanged(attr) {
        if (this.TargetSceneObject) {
            this.TargetSceneObject.intensity = attr.Value;
            attr.done();
        }
    }
    _onBiasAttrChanged(attr) {
        if (this.TargetSceneObject) {
            this.TargetSceneObject.bias = attr.Value;
            attr.done();
        }
    }
}
export default DirectionalLightNode;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdvbWwvTm9kZXMvU2NlbmVPYmplY3RzL0xpZ2h0cy9EaXJlY3Rpb25hbExpZ2h0Tm9kZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiT0FBTyxnQkFBZ0IsTUFBTSwyREFBMkQ7T0FDakYsYUFBYSxNQUFNLGlCQUFpQjtBQUczQyxtQ0FBbUMsYUFBYTtJQUM5QztRQUNFLE9BQU8sQ0FBQztRQUNSLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDO1lBQzlCLFdBQVcsRUFBRTtnQkFDWCxLQUFLLEVBQUUsQ0FBQztnQkFDUixTQUFTLEVBQUUsT0FBTztnQkFDbEIsU0FBUyxFQUFFLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO2FBQ25EO1lBQ0QsTUFBTSxFQUFFO2dCQUNOLEtBQUssRUFBRSxJQUFJO2dCQUNYLFNBQVMsRUFBRSxPQUFPO2dCQUNsQixTQUFTLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7YUFDOUM7U0FDRixDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsRUFBRSxDQUFDLHFCQUFxQixFQUFFLENBQUMsR0FBcUI7WUFDbkQsSUFBSSxDQUFDLHVCQUF1QixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUNuRixJQUFJLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzNFLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVTLGdCQUFnQjtRQUN4QixNQUFNLENBQUMsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFFTyx1QkFBdUIsQ0FBQyxJQUFtQjtRQUNqRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDO1lBQ1IsSUFBSSxDQUFDLGlCQUFrQixDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1lBQ2xFLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNkLENBQUM7SUFDSCxDQUFDO0lBRU8sa0JBQWtCLENBQUMsSUFBbUI7UUFDNUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztZQUNSLElBQUksQ0FBQyxpQkFBa0IsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztZQUM3RCxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDZCxDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUM7QUFDRCxlQUFlLG9CQUFvQixDQUFDIiwiZmlsZSI6IkdvbWwvTm9kZXMvU2NlbmVPYmplY3RzL0xpZ2h0cy9EaXJlY3Rpb25hbExpZ2h0Tm9kZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEaXJlY3Rpb25hbExpZ2h0IGZyb20gXCIuLi8uLi8uLi8uLi9Db3JlL1NjZW5lT2JqZWN0cy9MaWdodC9JbXBsL0RpcmVjdGlvbmFsTGlnaHRcIjtcbmltcG9ydCBMaWdodE5vZGVCYXNlIGZyb20gXCIuL0xpZ2h0Tm9kZUJhc2VcIjtcbmltcG9ydCBHb21sQXR0cmlidXRlIGZyb20gXCIuLi8uLi8uLi9Hb21sQXR0cmlidXRlXCI7XG5cbmNsYXNzIERpcmVjdGlvbmFsTGlnaHROb2RlIGV4dGVuZHMgTGlnaHROb2RlQmFzZTxEaXJlY3Rpb25hbExpZ2h0PiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5hdHRyaWJ1dGVzLmRlZmluZUF0dHJpYnV0ZSh7XG4gICAgICBcImludGVuc2l0eVwiOiB7XG4gICAgICAgIHZhbHVlOiAxLFxuICAgICAgICBjb252ZXJ0ZXI6IFwiZmxvYXRcIixcbiAgICAgICAgb25jaGFuZ2VkOiB0aGlzLl9vbkludGVuc2l0eUF0dHJDaGFuZ2VkLmJpbmQodGhpcyksXG4gICAgICB9LFxuICAgICAgXCJiaWFzXCI6IHtcbiAgICAgICAgdmFsdWU6IDAuMDEsXG4gICAgICAgIGNvbnZlcnRlcjogXCJmbG9hdFwiLFxuICAgICAgICBvbmNoYW5nZWQ6IHRoaXMuX29uQmlhc0F0dHJDaGFuZ2VkLmJpbmQodGhpcyksXG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5vbihcInVwZGF0ZS1zY2VuZS1vYmplY3RcIiwgKG9iajogRGlyZWN0aW9uYWxMaWdodCkgPT4ge1xuICAgICAgdGhpcy5fb25JbnRlbnNpdHlBdHRyQ2hhbmdlZC5jYWxsKHRoaXMsIHRoaXMuYXR0cmlidXRlcy5nZXRBdHRyaWJ1dGUoXCJpbnRlbnNpdHlcIikpO1xuICAgICAgdGhpcy5fb25CaWFzQXR0ckNoYW5nZWQuY2FsbCh0aGlzLCB0aGlzLmF0dHJpYnV0ZXMuZ2V0QXR0cmlidXRlKFwiYmlhc1wiKSk7XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX19jb25zdHJ1Y3RMaWdodCgpOiBEaXJlY3Rpb25hbExpZ2h0IHtcbiAgICByZXR1cm4gbmV3IERpcmVjdGlvbmFsTGlnaHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgX29uSW50ZW5zaXR5QXR0ckNoYW5nZWQoYXR0cjogR29tbEF0dHJpYnV0ZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLlRhcmdldFNjZW5lT2JqZWN0KSB7XG4gICAgICAoPERpcmVjdGlvbmFsTGlnaHQ+dGhpcy5UYXJnZXRTY2VuZU9iamVjdCkuaW50ZW5zaXR5ID0gYXR0ci5WYWx1ZTtcbiAgICAgIGF0dHIuZG9uZSgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX29uQmlhc0F0dHJDaGFuZ2VkKGF0dHI6IEdvbWxBdHRyaWJ1dGUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5UYXJnZXRTY2VuZU9iamVjdCkge1xuICAgICAgKDxEaXJlY3Rpb25hbExpZ2h0PnRoaXMuVGFyZ2V0U2NlbmVPYmplY3QpLmJpYXMgPSBhdHRyLlZhbHVlO1xuICAgICAgYXR0ci5kb25lKCk7XG4gICAgfVxuICB9XG59XG5leHBvcnQgZGVmYXVsdCBEaXJlY3Rpb25hbExpZ2h0Tm9kZTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==

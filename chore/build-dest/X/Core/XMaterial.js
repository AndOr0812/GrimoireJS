import ContextComponents from "../../ContextComponents";
import JThreeContext from "../../JThreeContext";
import BasicMaterial from "../../Core/Materials/Base/BasicMaterial";
class XMaterial extends BasicMaterial {
    constructor(_material) {
        super(require("../Material/Forward.html"));
        this._material = _material;
        this.materialVariables = {
            faceColor: this._material.faceColor,
            power: this._material.power,
            specularColor: this._material.specularColor,
            emissiveColor: this._material.emissiveColor
        };
        const rm = JThreeContext.getContextComponent(ContextComponents.ResourceManager);
        if (_material.texture) {
            rm.loadTexture(_material.texture).then(texture => {
                texture.MagFilter = WebGLRenderingContext.LINEAR;
                this.materialVariables["texture"] = texture;
            });
        }
    }
    getDrawGeometryLength(geo) {
        return this._material.faceColor.W > 0 ? this._material.indexCount : 0;
    }
    getDrawGeometryOffset(geo) {
        return this._material.indexOffset * 4;
    }
}
export default XMaterial;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlgvQ29yZS9YTWF0ZXJpYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ik9BQU8saUJBQWlCLE1BQU0seUJBQXlCO09BRWhELGFBQWEsTUFBTSxxQkFBcUI7T0FHeEMsYUFBYSxNQUFNLHlDQUF5QztBQUNuRSx3QkFBd0IsYUFBYTtJQUNuQyxZQUFvQixTQUF5QjtRQUMzQyxNQUFNLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQUM7UUFEekIsY0FBUyxHQUFULFNBQVMsQ0FBZ0I7UUFFM0MsSUFBSSxDQUFDLGlCQUFpQixHQUFHO1lBQ3ZCLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVM7WUFDbkMsS0FBSyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSztZQUMzQixhQUFhLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhO1lBQzNDLGFBQWEsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWE7U0FDNUMsQ0FBQztRQUNGLE1BQU0sRUFBRSxHQUFHLGFBQWEsQ0FBQyxtQkFBbUIsQ0FBa0IsaUJBQWlCLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDakcsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDdEIsRUFBRSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU87Z0JBQzVDLE9BQU8sQ0FBQyxTQUFTLEdBQUcscUJBQXFCLENBQUMsTUFBTSxDQUFDO2dCQUNqRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsU0FBUyxDQUFDLEdBQUcsT0FBTyxDQUFDO1lBQzlDLENBQUMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQztJQUNILENBQUM7SUFFTSxxQkFBcUIsQ0FBQyxHQUFhO1FBQ3hDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQztJQUN4RSxDQUFDO0lBRU0scUJBQXFCLENBQUMsR0FBYTtRQUN4QyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO0lBQ3hDLENBQUM7QUFDSCxDQUFDO0FBQ0QsZUFBZSxTQUFTLENBQUMiLCJmaWxlIjoiWC9Db3JlL1hNYXRlcmlhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb250ZXh0Q29tcG9uZW50cyBmcm9tIFwiLi4vLi4vQ29udGV4dENvbXBvbmVudHNcIjtcbmltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSBcIi4uLy4uL0NvcmUvUmVzb3VyY2VNYW5hZ2VyXCI7XG5pbXBvcnQgSlRocmVlQ29udGV4dCBmcm9tIFwiLi4vLi4vSlRocmVlQ29udGV4dFwiO1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gXCIuLi8uLi9Db3JlL0dlb21ldHJpZXMvQmFzZS9HZW9tZXRyeVwiO1xuaW1wb3J0IElYTWF0ZXJpYWxEYXRhIGZyb20gXCIuLi9JWE1hdGVyaWFsRGF0YVwiO1xuaW1wb3J0IEJhc2ljTWF0ZXJpYWwgZnJvbSBcIi4uLy4uL0NvcmUvTWF0ZXJpYWxzL0Jhc2UvQmFzaWNNYXRlcmlhbFwiO1xuY2xhc3MgWE1hdGVyaWFsIGV4dGVuZHMgQmFzaWNNYXRlcmlhbCB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX21hdGVyaWFsOiBJWE1hdGVyaWFsRGF0YSkge1xuICAgIHN1cGVyKHJlcXVpcmUoXCIuLi9NYXRlcmlhbC9Gb3J3YXJkLmh0bWxcIikpO1xuICAgIHRoaXMubWF0ZXJpYWxWYXJpYWJsZXMgPSB7XG4gICAgICBmYWNlQ29sb3I6IHRoaXMuX21hdGVyaWFsLmZhY2VDb2xvcixcbiAgICAgIHBvd2VyOiB0aGlzLl9tYXRlcmlhbC5wb3dlcixcbiAgICAgIHNwZWN1bGFyQ29sb3I6IHRoaXMuX21hdGVyaWFsLnNwZWN1bGFyQ29sb3IsXG4gICAgICBlbWlzc2l2ZUNvbG9yOiB0aGlzLl9tYXRlcmlhbC5lbWlzc2l2ZUNvbG9yXG4gICAgfTtcbiAgICBjb25zdCBybSA9IEpUaHJlZUNvbnRleHQuZ2V0Q29udGV4dENvbXBvbmVudDxSZXNvdXJjZU1hbmFnZXI+KENvbnRleHRDb21wb25lbnRzLlJlc291cmNlTWFuYWdlcik7XG4gICAgaWYgKF9tYXRlcmlhbC50ZXh0dXJlKSB7XG4gICAgICBybS5sb2FkVGV4dHVyZShfbWF0ZXJpYWwudGV4dHVyZSkudGhlbih0ZXh0dXJlID0+IHtcbiAgICAgICAgdGV4dHVyZS5NYWdGaWx0ZXIgPSBXZWJHTFJlbmRlcmluZ0NvbnRleHQuTElORUFSO1xuICAgICAgICB0aGlzLm1hdGVyaWFsVmFyaWFibGVzW1widGV4dHVyZVwiXSA9IHRleHR1cmU7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0RHJhd0dlb21ldHJ5TGVuZ3RoKGdlbzogR2VvbWV0cnkpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbC5mYWNlQ29sb3IuVyA+IDAgPyB0aGlzLl9tYXRlcmlhbC5pbmRleENvdW50IDogMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXREcmF3R2VvbWV0cnlPZmZzZXQoZ2VvOiBHZW9tZXRyeSk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21hdGVyaWFsLmluZGV4T2Zmc2V0ICogNDtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgWE1hdGVyaWFsO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

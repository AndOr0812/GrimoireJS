<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for lib/Core/Transform/Transformer.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../index.html">all files</a> / <a href="index.html">lib/Core/Transform/</a> Transformer.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">9.21% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>7/76</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/12</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">33.33% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>1/3</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">10.29% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>7/68</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import Quaternion from "../../Math/Quaternion";
import Vector3 from "../../Math/Vector3";
import Matrix from "../../Math/Matrix";
import JThreeObject from "../../Base/JThreeObject";
import { mat4, vec3, vec4 } from "gl-matrix";
import JThreeEvent from "./../../Base/JThreeEvent";
/**
 * Position,rotation and scale of scene object.
 * Every scene object in a scene has Toransformer.It's used to store and manipulate the position,rotation and scale ob the object.
 * Every Transformer can have a parent, each parent Transformer affect children's Transformer hierachically.
 */
class Transformer extends JThreeObject {
    /**
     * Constructor of Transformer
     * @param sceneObj the scene object this transformer attached to.
     */
<span class="fstat-no" title="function not covered" >    constructor(sceneObj) <span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ></span></span>{</span></span></span></span>
        super();
<span class="cstat-no" title="statement not covered" >        this.hasChanged = false;</span>
        /**
         * forward direction of transform in world space
         */
        this.forward = Vector3.ZUnit.negateThis();
        /**
        * up direction of transform in world space
        */
        this.up = Vector3.YUnit;
        /**
        * right direction of transform in world space
        */
        this.right = Vector3.XUnit;
        /**
         * calculation cache
         */
        this._localTransformMatrix = Matrix.identity();
<span class="cstat-no" title="statement not covered" >        this._localToGlobalMatrix = Matrix.identity();</span>
<span class="cstat-no" title="statement not covered" >        this._modelViewProjectionCaluculationCache = mat4.create();</span>
<span class="cstat-no" title="statement not covered" >        this._globalToLocalCache = Matrix.identity();</span>
<span class="cstat-no" title="statement not covered" >        this._g2lupdated = false;</span>
        /**
         * properties for storeing event handlers
         */
        this._onUpdateTransformHandler = new JThreeEvent();
<span class="cstat-no" title="statement not covered" >        this.linkedObject = sceneObj;</span>
<span class="cstat-no" title="statement not covered" >        this._position = Vector3.Zero;</span>
<span class="cstat-no" title="statement not covered" >        this._rotation = Quaternion.Identity;</span>
<span class="cstat-no" title="statement not covered" >        this._scale = new Vector3(1, 1, 1);</span>
<span class="cstat-no" title="statement not covered" >        this._localOrigin = new Vector3(0, 0, 0);</span>
<span class="cstat-no" title="statement not covered" >        this.updateTransform();</span>
    }
    get NeedUpdateChildren() {
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
    get globalToLocal() {
<span class="cstat-no" title="statement not covered" ></span>        if (this._g2lupdated) {
<span class="cstat-no" title="statement not covered" >            return this._globalToLocalCache;</span>
        }
<span class="cstat-no" title="statement not covered" >        mat4.invert(this._localTransformMatrix.rawElements, this._localToGlobalMatrix.rawElements);</span>
<span class="cstat-no" title="statement not covered" >        this._g2lupdated = true;</span>
    }
    /**
     * Subscribe event handlers it will be called when this transformer's transform was changed.
     * @param action the event handler for this event.
     */
    onUpdateTransform(action) {
<span class="cstat-no" title="statement not covered" >        this._onUpdateTransformHandler.addListener(action);</span>
    }
    /**
     * update all transform
     * You no need to call this method manually if you access all of properties in this transformer by accessor.
     */
    updateTransform() <span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ></span>{</span>
<span class="cstat-no" title="statement not covered" >        this.hasChanged = true;</span>
<span class="cstat-no" title="statement not covered" >        this.__updateTransformMatricies();</span>
        // notify update to childrens
        if (this.linkedObject.Children &amp;&amp; this.NeedUpdateChildren) {
<span class="cstat-no" title="statement not covered" >            this.linkedObject.Children.forEach(<span class="fstat-no" title="function not covered" >(v) =&gt; {</span></span>
<span class="cstat-no" title="statement not covered" >                v.Transformer.updateTransform();</span>
            });
        }
<span class="cstat-no" title="statement not covered" >        this._g2lupdated = false;</span>
        // fire updated event
        this._onUpdateTransformHandler.fire(this, this.linkedObject);
    }
    get hasParent() {
<span class="cstat-no" title="statement not covered" >        return !!this.linkedObject.Parent;</span>
    }
    get parent() {
<span class="cstat-no" title="statement not covered" >        return this.hasParent ? this.linkedObject.Parent.Transformer : null;</span>
    }
    get childrenCount() {
<span class="cstat-no" title="statement not covered" >        return this.linkedObject.Children.length;</span>
    }
    /**
     * Calculate Projection-View-Model matrix with renderer camera.
     */
    calculateMVPMatrix(renderer) {
<span class="cstat-no" title="statement not covered" >        mat4.mul(this._modelViewProjectionCaluculationCache, renderer.Camera.viewMatrix.rawElements, this.LocalToGlobal.rawElements);</span>
<span class="cstat-no" title="statement not covered" >        mat4.mul(this._modelViewProjectionCaluculationCache, renderer.Camera.projectionMatrix.rawElements, this._modelViewProjectionCaluculationCache);</span>
<span class="cstat-no" title="statement not covered" >        return new Matrix(this._modelViewProjectionCaluculationCache);</span>
    }
    get GlobalPosition() {
<span class="cstat-no" title="statement not covered" >        return Matrix.transformPoint(this._localToGlobalMatrix, Vector3.Zero);</span>
    }
    /**
     * Get accessor for the matrix providing the transform Local space into Global space.
     */
    get LocalToGlobal() {
<span class="cstat-no" title="statement not covered" >        return this._localToGlobalMatrix;</span>
    }
    get LocalTransform() {
<span class="cstat-no" title="statement not covered" >        return this._localTransformMatrix;</span>
    }
    /**
     * Get accessor for model rotation.
     */
    get Rotation() {
<span class="cstat-no" title="statement not covered" >        return this._rotation;</span>
    }
    /**
     * Set accessor for model rotation.
     */
    set Rotation(quat) {
<span class="cstat-no" title="statement not covered" >        this._rotation = quat;</span>
<span class="cstat-no" title="statement not covered" >        this.updateTransform();</span>
    }
    /**
     * Get Accessor for model position.
     */
    get Position() {
<span class="cstat-no" title="statement not covered" >        return this._position;</span>
    }
    /**
     * Set Accessor for model position.
     */
    set Position(vec) {
<span class="cstat-no" title="statement not covered" >        this._position = vec;</span>
<span class="cstat-no" title="statement not covered" >        this.updateTransform();</span>
    }
    /**
     * Get Accessor for model scale.
     */
    get Scale() {
<span class="cstat-no" title="statement not covered" >        return this._scale;</span>
    }
    /**
     * Set Accessor for model scale.
     */
    set Scale(vec) {
<span class="cstat-no" title="statement not covered" >        this._scale = vec;</span>
<span class="cstat-no" title="statement not covered" >        this.updateTransform();</span>
    }
    get LocalOrigin() {
<span class="cstat-no" title="statement not covered" >        return this._localOrigin;</span>
    }
    set LocalOrigin(origin) {
<span class="cstat-no" title="statement not covered" >        this._localOrigin = origin;</span>
<span class="cstat-no" title="statement not covered" >        this.updateTransform();</span>
    }
    transformDirection(direction) {
<span class="cstat-no" title="statement not covered" >        return Matrix.transformNormal(this.LocalToGlobal, direction);</span>
    }
    transformPoint(point) {
<span class="cstat-no" title="statement not covered" >        return Matrix.transformPoint(this._localToGlobalMatrix, point);</span>
    }
    transformVector(vector) {
<span class="cstat-no" title="statement not covered" >        return Matrix.transform(this._localToGlobalMatrix, vector);</span>
    }
    inverseTransformDirection(direction) {
<span class="cstat-no" title="statement not covered" >        return Matrix.transformNormal(this.globalToLocal, direction);</span>
    }
    inverseTransformPoint(point) {
<span class="cstat-no" title="statement not covered" >        return Matrix.transformPoint(this.globalToLocal, point);</span>
    }
    inverseTransformVector(vector) {
<span class="cstat-no" title="statement not covered" >        return Matrix.transform(this.globalToLocal, vector);</span>
    }
    /**
    * Update transform matricies
    * @return {[type]} [description]
    */
    __updateTransformMatricies() <span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ><span class="cstat-no" title="statement not covered" ></span>{</span></span>
        // initialize localTransformCache &amp; localToGlobalMatrix.rawElements
<span class="cstat-no" title="statement not covered" >        mat4.identity(this._localTransformMatrix.rawElements);</span>
<span class="cstat-no" title="statement not covered" >        mat4.identity(this._localToGlobalMatrix.rawElements);</span>
        // generate local transofrm matrix
        mat4.fromRotationTranslationScaleOrigin(this._localTransformMatrix.rawElements, this._rotation.rawElements, this._position.rawElements, this._scale.rawElements, this._localOrigin.rawElements); // substitute Rotation*Translation*Scale matrix (around local origin) for localTransformMatrix.rawElements
        if (this.linkedObject != null &amp;&amp; this.linkedObject.Parent != null) {
            // Use LocalToGlobal matrix of parents to multiply with localTransformCache
<span class="cstat-no" title="statement not covered" >            mat4.copy(this._localToGlobalMatrix.rawElements, this.linkedObject.Parent.Transformer.LocalToGlobal.rawElements);</span>
        }
        else {
            // If this transformer have no parent transformer,localToGlobalMatrix.rawElements,GlobalTransform will be same as localTransformCache
<span class="cstat-no" title="statement not covered" >            mat4.identity(this._localToGlobalMatrix.rawElements);</span>
        }
        // Multiply parent transform
        mat4.multiply(this._localToGlobalMatrix.rawElements, this._localToGlobalMatrix.rawElements, this._localTransformMatrix.rawElements);
<span class="cstat-no" title="statement not covered" >        this.__updateDirections();</span>
    }
    /**
     * Update directions by this transform
     */
    __updateDirections() <span class="cstat-no" title="statement not covered" ></span>{
        // Calculate direction vectors
<span class="cstat-no" title="statement not covered" >        this._updateDirection(this.right, [1, 0, 0, 0]); // need to reduce memory allocation</span>
        this._updateDirection(this.up, [0, 1, 0, 0]);
<span class="cstat-no" title="statement not covered" >        this._updateDirection(this.forward, [0, 0, -1, 0]);</span>
    }
    _updateDirection(rawElements, sourceVector4) {
<span class="cstat-no" title="statement not covered" >        vec4.transformMat4(rawElements.rawElements, sourceVector4, this._localToGlobalMatrix.rawElements);</span>
<span class="cstat-no" title="statement not covered" >        vec3.normalize(rawElements.rawElements, rawElements.rawElements);</span>
    }
}
export default Transformer;
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Fri Mar 11 2016 01:41:14 GMT+0900 (JST)
</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>

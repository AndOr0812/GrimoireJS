import JThreeContext from "../../../JThreeContext";
import ContextComponents from "../../../ContextComponents";
class GLSpecResolver {
    static get GL() {
        const canvasManager = JThreeContext.getContextComponent(ContextComponents.CanvasManager);
        if (canvasManager.canvases.length > 0) {
            return canvasManager.canvases[0].gl;
        }
        else {
            console.error("can't obtain the gl context to check gl spec");
        }
    }
    static _getParameterOrCached(cached, parameterType) {
        return cached || GLSpecResolver.GL.getParameter(parameterType);
    }
    static get MaxCombinedTextureUnits() {
        return GLSpecResolver._maxCombinedTextureUnits = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxCombinedTextureUnits, WebGLRenderingContext.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
    }
    static get MaxCubeMapTextureSize() {
        return GLSpecResolver._maxCubeMapTextureSize = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxCubeMapTextureSize, WebGLRenderingContext.MAX_CUBE_MAP_TEXTURE_SIZE);
    }
    static get MaxFragmentUniformVectors() {
        return GLSpecResolver._maxFragmentUniformVectors = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxFragmentUniformVectors, WebGLRenderingContext.MAX_FRAGMENT_UNIFORM_VECTORS);
    }
    static get MaxRenderbufferSize() {
        return GLSpecResolver._maxRenderbufferSize = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxRenderbufferSize, WebGLRenderingContext.MAX_RENDERBUFFER_SIZE);
    }
    static get MaxTextureImageUnits() {
        return GLSpecResolver._maxTextureImageUnits = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxTextureImageUnits, WebGLRenderingContext.MAX_TEXTURE_IMAGE_UNITS);
    }
    static get MaxTextureSize() {
        return GLSpecResolver._maxTextureSize = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxTextureSize, WebGLRenderingContext.MAX_TEXTURE_SIZE);
    }
    static get MaxVaryingVectors() {
        return GLSpecResolver._maxVaryingVectors = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxVaryingVectors, WebGLRenderingContext.MAX_VARYING_VECTORS);
    }
    static get MaxVertexAttribs() {
        return GLSpecResolver._maxVertexAttribs = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxVertexAttribs, WebGLRenderingContext.MAX_VERTEX_ATTRIBS);
    }
    static get MaxVertexTextureImageUnits() {
        return GLSpecResolver._maxVertexTextureImageUnits = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxVertexTextureImageUnits, WebGLRenderingContext.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
    }
    static get MaxVertexUniformVectors() {
        return GLSpecResolver._maxVertexUniformVectors = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxVertexUniformVectors, WebGLRenderingContext.MAX_VERTEX_UNIFORM_VECTORS);
    }
    static get MaxViewportDims() {
        return GLSpecResolver._maxViewportDims = GLSpecResolver._getParameterOrCached(GLSpecResolver._maxViewportDims, WebGLRenderingContext.MAX_VIEWPORT_DIMS);
    }
    static get ShaderPrecisions() {
        return GLSpecResolver._allShaderPrecisionFormats = GLSpecResolver._allShaderPrecisionFormats || GLSpecResolver._getShaderPrecisions();
    }
    static _getShaderPrecisions() {
        /* For Vertex Shaders */
        const vLOW_FLOAT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.VERTEX_SHADER, WebGLRenderingContext.LOW_FLOAT);
        const vMEDIUM_FLOAT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.VERTEX_SHADER, WebGLRenderingContext.MEDIUM_FLOAT);
        const vHIGH_FLOAT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.VERTEX_SHADER, WebGLRenderingContext.HIGH_FLOAT);
        const vLOW_INT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.VERTEX_SHADER, WebGLRenderingContext.LOW_INT);
        const vMEDIUM_INT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.VERTEX_SHADER, WebGLRenderingContext.MEDIUM_INT);
        const vHIGH_INT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.VERTEX_SHADER, WebGLRenderingContext.HIGH_INT);
        const fLOW_FLOAT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.FRAGMENT_SHADER, WebGLRenderingContext.LOW_FLOAT);
        const fMEDIUM_FLOAT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.FRAGMENT_SHADER, WebGLRenderingContext.MEDIUM_FLOAT);
        const fHIGH_FLOAT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.FRAGMENT_SHADER, WebGLRenderingContext.HIGH_FLOAT);
        const fLOW_INT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.FRAGMENT_SHADER, WebGLRenderingContext.LOW_INT);
        const fMEDIUM_INT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.FRAGMENT_SHADER, WebGLRenderingContext.MEDIUM_INT);
        const fHIGH_INT = GLSpecResolver.GL.getShaderPrecisionFormat(WebGLRenderingContext.FRAGMENT_SHADER, WebGLRenderingContext.HIGH_INT);
        return { vLOW_FLOAT: vLOW_FLOAT, vMEDIUM_FLOAT: vMEDIUM_FLOAT, vHIGH_FLOAT: vHIGH_FLOAT,
            vLOW_INT: vLOW_INT, vMEDIUM_INT: vMEDIUM_INT, vHIGH_INT: vHIGH_INT,
            fLOW_FLOAT: fLOW_FLOAT, fMEDIUM_FLOAT: fMEDIUM_FLOAT, fHIGH_FLOAT: fHIGH_FLOAT,
            fLOW_INT: fLOW_INT, fMEDIUM_INT: fMEDIUM_INT, fHIGH_INT: fHIGH_INT
        };
    }
}
export default GLSpecResolver;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvcmUvQ2FudmFzL0dML0dMU3BlY1Jlc29sdmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJPQUFPLGFBQWEsTUFBTSx3QkFBd0I7T0FFM0MsaUJBQWlCLE1BQU0sNEJBQTRCO0FBRTFEO0lBZUUsV0FBbUIsRUFBRTtRQUNuQixNQUFNLGFBQWEsR0FBRyxhQUFhLENBQUMsbUJBQW1CLENBQWdCLGlCQUFpQixDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3hHLEVBQUUsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3RDLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLE9BQU8sQ0FBQyxLQUFLLENBQUMsOENBQThDLENBQUMsQ0FBQztRQUNoRSxDQUFDO0lBQ0gsQ0FBQztJQUVELE9BQWUscUJBQXFCLENBQUMsTUFBdUIsRUFBRSxhQUFxQjtRQUNqRixNQUFNLENBQUMsTUFBTSxJQUFJLGNBQWMsQ0FBQyxFQUFFLENBQUMsWUFBWSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFHRCxXQUFrQix1QkFBdUI7UUFDdkMsTUFBTSxDQUFDLGNBQWMsQ0FBQyx3QkFBd0IsR0FBRyxjQUFjLENBQUMscUJBQXFCLENBQUMsY0FBYyxDQUFDLHdCQUF3QixFQUFFLHFCQUFxQixDQUFDLGdDQUFnQyxDQUFXLENBQUM7SUFDbk0sQ0FBQztJQUdELFdBQWtCLHFCQUFxQjtRQUNyQyxNQUFNLENBQUMsY0FBYyxDQUFDLHNCQUFzQixHQUFHLGNBQWMsQ0FBQyxxQkFBcUIsQ0FBQyxjQUFjLENBQUMsc0JBQXNCLEVBQUUscUJBQXFCLENBQUMseUJBQXlCLENBQVcsQ0FBQztJQUN4TCxDQUFDO0lBR0QsV0FBa0IseUJBQXlCO1FBQ3pDLE1BQU0sQ0FBQyxjQUFjLENBQUMsMEJBQTBC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VyxFQUFJLFNBQVMsRUFBSSxTQUFTO1lBQzVFLFVBQVUsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFFLGFBQWEsRUFBRSxXQUFXLEVBQUUsV0FBVztZQUM5RSxRQUFRLEVBQUksUUFBUSxFQUFJLFdBQVcsRUFBSSxXQUFXLEVBQUksU0FBUyxFQUFJLFNBQVM7U0FDN0UsQ0FBQztJQUNWLENBQUM7QUFDSCxDQUFDO0FBRUQsZUFBZSxjQUFjLENBQUMiLCJmaWxlIjoiQ29yZS9DYW52YXMvR0wvR0xTcGVjUmVzb2x2ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSlRocmVlQ29udGV4dCBmcm9tIFwiLi4vLi4vLi4vSlRocmVlQ29udGV4dFwiO1xuaW1wb3J0IENhbnZhc01hbmFnZXIgZnJvbSBcIi4uL0NhbnZhc01hbmFnZXJcIjtcbmltcG9ydCBDb250ZXh0Q29tcG9uZW50cyBmcm9tIFwiLi4vLi4vLi4vQ29udGV4dENvbXBvbmVudHNcIjtcbmltcG9ydCBJR0xQcmVjaXNpb25zIGZyb20gXCIuL0lHTFByZWNpc2lvbnNcIjtcbmNsYXNzIEdMU3BlY1Jlc29sdmVyIHtcblxuICBwcml2YXRlIHN0YXRpYyBfbWF4Q29tYmluZWRUZXh0dXJlVW5pdHM6IG51bWJlcjtcbiAgcHJpdmF0ZSBzdGF0aWMgX21heEN1YmVNYXBUZXh0dXJlU2l6ZTogbnVtYmVyO1xuICBwcml2YXRlIHN0YXRpYyBfbWF4RnJhZ21lbnRVbmlmb3JtVmVjdG9yczogbnVtYmVyO1xuICBwcml2YXRlIHN0YXRpYyBfbWF4UmVuZGVyYnVmZmVyU2l6ZTogbnVtYmVyO1xuICBwcml2YXRlIHN0YXRpYyBfbWF4VGV4dHVyZUltYWdlVW5pdHM6IG51bWJlcjtcbiAgcHJpdmF0ZSBzdGF0aWMgX21heFRleHR1cmVTaXplOiBudW1iZXI7XG4gIHByaXZhdGUgc3RhdGljIF9tYXhWYXJ5aW5nVmVjdG9yczogbnVtYmVyO1xuICBwcml2YXRlIHN0YXRpYyBfbWF4VmVydGV4QXR0cmliczogbnVtYmVyO1xuICBwcml2YXRlIHN0YXRpYyBfbWF4VmVydGV4VGV4dHVyZUltYWdlVW5pdHM6IG51bWJlcjtcbiAgcHJpdmF0ZSBzdGF0aWMgX21heFZlcnRleFVuaWZvcm1WZWN0b3JzOiBudW1iZXI7XG4gIHByaXZhdGUgc3RhdGljIF9tYXhWaWV3cG9ydERpbXM6IG51bWJlcltdO1xuICBwcml2YXRlIHN0YXRpYyBfYWxsU2hhZGVyUHJlY2lzaW9uRm9ybWF0czogSUdMUHJlY2lzaW9ucztcblxuICBwcml2YXRlIHN0YXRpYyBnZXQgR0woKSB7XG4gICAgY29uc3QgY2FudmFzTWFuYWdlciA9IEpUaHJlZUNvbnRleHQuZ2V0Q29udGV4dENvbXBvbmVudDxDYW52YXNNYW5hZ2VyPihDb250ZXh0Q29tcG9uZW50cy5DYW52YXNNYW5hZ2VyKTtcbiAgICBpZiAoY2FudmFzTWFuYWdlci5jYW52YXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gY2FudmFzTWFuYWdlci5jYW52YXNlc1swXS5nbDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcImNhbid0IG9idGFpbiB0aGUgZ2wgY29udGV4dCB0byBjaGVjayBnbCBzcGVjXCIpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RhdGljIF9nZXRQYXJhbWV0ZXJPckNhY2hlZChjYWNoZWQ6IG51bWJlcnxudW1iZXJbXSwgcGFyYW1ldGVyVHlwZTogbnVtYmVyKTogbnVtYmVyfG51bWJlcltdIHtcbiAgICByZXR1cm4gY2FjaGVkIHx8IEdMU3BlY1Jlc29sdmVyLkdMLmdldFBhcmFtZXRlcihwYXJhbWV0ZXJUeXBlKTtcbiAgfVxuXG5cbiAgcHVibGljIHN0YXRpYyBnZXQgTWF4Q29tYmluZWRUZXh0dXJlVW5pdHMoKSB7XG4gICAgcmV0dXJuIEdMU3BlY1Jlc29sdmVyLl9tYXhDb21iaW5lZFRleHR1cmVVbml0cyA9IEdMU3BlY1Jlc29sdmVyLl9nZXRQYXJhbWV0ZXJPckNhY2hlZChHTFNwZWNSZXNvbHZlci5fbWF4Q29tYmluZWRUZXh0dXJlVW5pdHMsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5NQVhfQ09NQklORURfVEVYVFVSRV9JTUFHRV9VTklUUykgYXMgbnVtYmVyO1xuICB9XG5cblxuICBwdWJsaWMgc3RhdGljIGdldCBNYXhDdWJlTWFwVGV4dHVyZVNpemUoKSB7XG4gICAgcmV0dXJuIEdMU3BlY1Jlc29sdmVyLl9tYXhDdWJlTWFwVGV4dHVyZVNpemUgPSBHTFNwZWNSZXNvbHZlci5fZ2V0UGFyYW1ldGVyT3JDYWNoZWQoR0xTcGVjUmVzb2x2ZXIuX21heEN1YmVNYXBUZXh0dXJlU2l6ZSwgV2ViR0xSZW5kZXJpbmdDb250ZXh0Lk1BWF9DVUJFX01BUF9URVhUVVJFX1NJWkUpIGFzIG51bWJlcjtcbiAgfVxuXG5cbiAgcHVibGljIHN0YXRpYyBnZXQgTWF4RnJhZ21lbnRVbmlmb3JtVmVjdG9ycygpIHtcbiAgICByZXR1cm4gR0xTcGVjUmVzb2x2ZXIuX21heEZyYWdtZW50VW5pZm9ybVZlY3RvcnMgPSBHTFNwZWNSZXNvbHZlci5fZ2V0UGFyYW1ldGVyT3JDYWNoZWQoR0xTcGVjUmVzb2x2ZXIuX21heEZyYWdtZW50VW5pZm9ybVZlY3RvcnMsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5NQVhfRlJBR01FTlRfVU5JRk9STV9WRUNUT1JTKSBhcyBudW1iZXI7XG4gIH1cblxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IE1heFJlbmRlcmJ1ZmZlclNpemUoKSB7XG4gICAgcmV0dXJuIEdMU3BlY1Jlc29sdmVyLl9tYXhSZW5kZXJidWZmZXJTaXplID0gR0xTcGVjUmVzb2x2ZXIuX2dldFBhcmFtZXRlck9yQ2FjaGVkKEdMU3BlY1Jlc29sdmVyLl9tYXhSZW5kZXJidWZmZXJTaXplLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuTUFYX1JFTkRFUkJVRkZFUl9TSVpFKSBhcyBudW1iZXI7XG4gIH1cblxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IE1heFRleHR1cmVJbWFnZVVuaXRzKCkge1xuICAgIHJldHVybiBHTFNwZWNSZXNvbHZlci5fbWF4VGV4dHVyZUltYWdlVW5pdHMgPSBHTFNwZWNSZXNvbHZlci5fZ2V0UGFyYW1ldGVyT3JDYWNoZWQoR0xTcGVjUmVzb2x2ZXIuX21heFRleHR1cmVJbWFnZVVuaXRzLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMpIGFzIG51bWJlcjtcbiAgfVxuXG5cbiAgcHVibGljIHN0YXRpYyBnZXQgTWF4VGV4dHVyZVNpemUoKSB7XG4gICAgcmV0dXJuIEdMU3BlY1Jlc29sdmVyLl9tYXhUZXh0dXJlU2l6ZSA9IEdMU3BlY1Jlc29sdmVyLl9nZXRQYXJhbWV0ZXJPckNhY2hlZChHTFNwZWNSZXNvbHZlci5fbWF4VGV4dHVyZVNpemUsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5NQVhfVEVYVFVSRV9TSVpFKSBhcyBudW1iZXI7XG4gIH1cblxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IE1heFZhcnlpbmdWZWN0b3JzKCkge1xuICAgIHJldHVybiBHTFNwZWNSZXNvbHZlci5fbWF4VmFyeWluZ1ZlY3RvcnMgPSBHTFNwZWNSZXNvbHZlci5fZ2V0UGFyYW1ldGVyT3JDYWNoZWQoR0xTcGVjUmVzb2x2ZXIuX21heFZhcnlpbmdWZWN0b3JzLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuTUFYX1ZBUllJTkdfVkVDVE9SUykgYXMgbnVtYmVyO1xuICB9XG5cblxuICBwdWJsaWMgc3RhdGljIGdldCBNYXhWZXJ0ZXhBdHRyaWJzKCkge1xuICAgIHJldHVybiBHTFNwZWNSZXNvbHZlci5fbWF4VmVydGV4QXR0cmlicyA9IEdMU3BlY1Jlc29sdmVyLl9nZXRQYXJhbWV0ZXJPckNhY2hlZChHTFNwZWNSZXNvbHZlci5fbWF4VmVydGV4QXR0cmlicywgV2ViR0xSZW5kZXJpbmdDb250ZXh0Lk1BWF9WRVJURVhfQVRUUklCUykgYXMgbnVtYmVyO1xuICB9XG5cblxuICBwdWJsaWMgc3RhdGljIGdldCBNYXhWZXJ0ZXhUZXh0dXJlSW1hZ2VVbml0cygpIHtcbiAgICByZXR1cm4gR0xTcGVjUmVzb2x2ZXIuX21heFZlcnRleFRleHR1cmVJbWFnZVVuaXRzID0gR0xTcGVjUmVzb2x2ZXIuX2dldFBhcmFtZXRlck9yQ2FjaGVkKEdMU3BlY1Jlc29sdmVyLl9tYXhWZXJ0ZXhUZXh0dXJlSW1hZ2VVbml0cywgV2ViR0xSZW5kZXJpbmdDb250ZXh0Lk1BWF9WRVJURVhfVEVYVFVSRV9JTUFHRV9VTklUUykgYXMgbnVtYmVyO1xuICB9XG5cblxuICBwdWJsaWMgc3RhdGljIGdldCBNYXhWZXJ0ZXhVbmlmb3JtVmVjdG9ycygpIHtcbiAgICByZXR1cm4gR0xTcGVjUmVzb2x2ZXIuX21heFZlcnRleFVuaWZvcm1WZWN0b3JzID0gR0xTcGVjUmVzb2x2ZXIuX2dldFBhcmFtZXRlck9yQ2FjaGVkKEdMU3BlY1Jlc29sdmVyLl9tYXhWZXJ0ZXhVbmlmb3JtVmVjdG9ycywgV2ViR0xSZW5kZXJpbmdDb250ZXh0Lk1BWF9WRVJURVhfVU5JRk9STV9WRUNUT1JTKSBhcyBudW1iZXI7XG4gIH1cblxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IE1heFZpZXdwb3J0RGltcygpIHtcbiAgICByZXR1cm4gR0xTcGVjUmVzb2x2ZXIuX21heFZpZXdwb3J0RGltcyA9IEdMU3BlY1Jlc29sdmVyLl9nZXRQYXJhbWV0ZXJPckNhY2hlZChHTFNwZWNSZXNvbHZlci5fbWF4Vmlld3BvcnREaW1zLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuTUFYX1ZJRVdQT1JUX0RJTVMpIGFzIG51bWJlcltdO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXQgU2hhZGVyUHJlY2lzaW9ucygpIHtcbiAgICByZXR1cm4gR0xTcGVjUmVzb2x2ZXIuX2FsbFNoYWRlclByZWNpc2lvbkZvcm1hdHMgPSBHTFNwZWNSZXNvbHZlci5fYWxsU2hhZGVyUHJlY2lzaW9uRm9ybWF0cyB8fCBHTFNwZWNSZXNvbHZlci5fZ2V0U2hhZGVyUHJlY2lzaW9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgX2dldFNoYWRlclByZWNpc2lvbnMoKTogSUdMUHJlY2lzaW9ucyB7XG4gICAgLyogRm9yIFZlcnRleCBTaGFkZXJzICovXG4gICAgY29uc3QgdkxPV19GTE9BVDogV2ViR0xTaGFkZXJQcmVjaXNpb25Gb3JtYXQgID0gR0xTcGVjUmVzb2x2ZXIuR0wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KFdlYkdMUmVuZGVyaW5nQ29udGV4dC5WRVJURVhfU0hBREVSLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuTE9XX0ZMT0FUKTtcbiAgICBjb25zdCB2TUVESVVNX0ZMT0FUOiBXZWJHTFNoYWRlclByZWNpc2lvbkZvcm1hdCA9IEdMU3BlY1Jlc29sdmVyLkdMLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChXZWJHTFJlbmRlcmluZ0NvbnRleHQuVkVSVEVYX1NIQURFUiwgV2ViR0xSZW5kZXJpbmdDb250ZXh0Lk1FRElVTV9GTE9BVCk7XG4gICAgY29uc3QgdkhJR0hfRkxPQVQ6IFdlYkdMU2hhZGVyUHJlY2lzaW9uRm9ybWF0ID0gR0xTcGVjUmVzb2x2ZXIuR0wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KFdlYkdMUmVuZGVyaW5nQ29udGV4dC5WRVJURVhfU0hBREVSLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuSElHSF9GTE9BVCk7XG4gICAgY29uc3QgdkxPV19JTlQ6IFdlYkdMU2hhZGVyUHJlY2lzaW9uRm9ybWF0ICA9IEdMU3BlY1Jlc29sdmVyLkdMLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChXZWJHTFJlbmRlcmluZ0NvbnRleHQuVkVSVEVYX1NIQURFUiwgV2ViR0xSZW5kZXJpbmdDb250ZXh0LkxPV19JTlQpO1xuICAgIGNvbnN0IHZNRURJVU1fSU5UOiBXZWJHTFNoYWRlclByZWNpc2lvbkZvcm1hdCA9IEdMU3BlY1Jlc29sdmVyLkdMLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChXZWJHTFJlbmRlcmluZ0NvbnRleHQuVkVSVEVYX1NIQURFUiwgV2ViR0xSZW5kZXJpbmdDb250ZXh0Lk1FRElVTV9JTlQpO1xuICAgIGNvbnN0IHZISUdIX0lOVDogV2ViR0xTaGFkZXJQcmVjaXNpb25Gb3JtYXQgPSBHTFNwZWNSZXNvbHZlci5HTC5nZXRTaGFkZXJQcmVjaXNpb25Gb3JtYXQoV2ViR0xSZW5kZXJpbmdDb250ZXh0LlZFUlRFWF9TSEFERVIsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5ISUdIX0lOVCk7XG4gICAgY29uc3QgZkxPV19GTE9BVDogV2ViR0xTaGFkZXJQcmVjaXNpb25Gb3JtYXQgID0gR0xTcGVjUmVzb2x2ZXIuR0wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KFdlYkdMUmVuZGVyaW5nQ29udGV4dC5GUkFHTUVOVF9TSEFERVIsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5MT1dfRkxPQVQpO1xuICAgIGNvbnN0IGZNRURJVU1fRkxPQVQ6IFdlYkdMU2hhZGVyUHJlY2lzaW9uRm9ybWF0ID0gR0xTcGVjUmVzb2x2ZXIuR0wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KFdlYkdMUmVuZGVyaW5nQ29udGV4dC5GUkFHTUVOVF9TSEFERVIsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5NRURJVU1fRkxPQVQpO1xuICAgIGNvbnN0IGZISUdIX0ZMT0FUOiBXZWJHTFNoYWRlclByZWNpc2lvbkZvcm1hdCA9IEdMU3BlY1Jlc29sdmVyLkdMLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChXZWJHTFJlbmRlcmluZ0NvbnRleHQuRlJBR01FTlRfU0hBREVSLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuSElHSF9GTE9BVCk7XG4gICAgY29uc3QgZkxPV19JTlQ6IFdlYkdMU2hhZGVyUHJlY2lzaW9uRm9ybWF0ICA9IEdMU3BlY1Jlc29sdmVyLkdMLmdldFNoYWRlclByZWNpc2lvbkZvcm1hdChXZWJHTFJlbmRlcmluZ0NvbnRleHQuRlJBR01FTlRfU0hBREVSLCBXZWJHTFJlbmRlcmluZ0NvbnRleHQuTE9XX0lOVCk7XG4gICAgY29uc3QgZk1FRElVTV9JTlQ6IFdlYkdMU2hhZGVyUHJlY2lzaW9uRm9ybWF0ID0gR0xTcGVjUmVzb2x2ZXIuR0wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KFdlYkdMUmVuZGVyaW5nQ29udGV4dC5GUkFHTUVOVF9TSEFERVIsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5NRURJVU1fSU5UKTtcbiAgICBjb25zdCBmSElHSF9JTlQ6IFdlYkdMU2hhZGVyUHJlY2lzaW9uRm9ybWF0ID0gR0xTcGVjUmVzb2x2ZXIuR0wuZ2V0U2hhZGVyUHJlY2lzaW9uRm9ybWF0KFdlYkdMUmVuZGVyaW5nQ29udGV4dC5GUkFHTUVOVF9TSEFERVIsIFdlYkdMUmVuZGVyaW5nQ29udGV4dC5ISUdIX0lOVCk7XG4gICAgcmV0dXJuIDxJR0xQcmVjaXNpb25zPnt2TE9XX0ZMT0FUOiB2TE9XX0ZMT0FULCB2TUVESVVNX0ZMT0FUOiB2TUVESVVNX0ZMT0FULCB2SElHSF9GTE9BVDogdkhJR0hfRkxPQVQsXG4gICAgICAgICAgICB2TE9XX0lOVCAgOiB2TE9XX0lOVCAgLCB2TUVESVVNX0lOVCAgOiB2TUVESVVNX0lOVCAgLCB2SElHSF9JTlQgIDogdkhJR0hfSU5ULFxuICAgICAgICAgICAgZkxPV19GTE9BVDogZkxPV19GTE9BVCwgZk1FRElVTV9GTE9BVDogZk1FRElVTV9GTE9BVCwgZkhJR0hfRkxPQVQ6IGZISUdIX0ZMT0FULFxuICAgICAgICAgICAgZkxPV19JTlQgIDogZkxPV19JTlQgICwgZk1FRElVTV9JTlQgIDogZk1FRElVTV9JTlQgICwgZkhJR0hfSU5UICA6IGZISUdIX0lOVFxuICAgICAgICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR0xTcGVjUmVzb2x2ZXI7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

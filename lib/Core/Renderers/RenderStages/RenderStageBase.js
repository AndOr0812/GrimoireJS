import JThreeObjectWithID from "../../../Base/JThreeObjectWithID";
import ContextComponents from "../../../ContextComponents";
import JThreeContext from "../../../JThreeContext";
class RenderStageBase extends JThreeObjectWithID {
    constructor(renderer) {
        super();
        this.stageVariables = {};
        this._renderer = renderer;
    }
    getDefaultRendererConfigure(techniqueIndex) {
        return {
            cullOrientation: "BACK",
            depthEnabled: true,
            depthMode: "LESS",
            depthMask: true,
            blendEnabled: true,
            blendSrcFactor: "SRC_ALPHA",
            blendDstFactor: "ONE_MINUS_SRC_ALPHA",
            redMask: true,
            greenMask: true,
            blueMask: true,
            alphaMask: true
        };
    }
    /**
     * Getter for renderer having this renderstage
     */
    get Renderer() {
        return this._renderer;
    }
    get GL() {
        return this.Renderer.GL;
    }
    preStage(scene, texs) {
        return;
    }
    postStage(scene, texs) {
        return;
    }
    /**
     * This method will be called before process render in each pass
     */
    preTechnique(scene, techniqueIndex, texs) {
        return;
    }
    /**
     * This method will be called after process render in each pass.
     */
    postTechnique(scene, techniqueIndex, texs) {
        this.Renderer.GL.flush();
    }
    needRender(scene, object, techniqueIndex) {
        return false;
    }
    getTechniqueCount(scene) {
        return 1;
    }
    getTarget(techniqueIndex) {
        return "scene";
    }
    drawForMaterials(scene, object, techniqueCount, techniqueIndex, texs, materialGroup, isWireframed) {
        if (!object.isVisible) {
            return;
        }
        const materials = object.getMaterials(materialGroup);
        for (let i = 0; i < materials.length; i++) {
            this.drawForMaterial(scene, object, techniqueCount, techniqueIndex, texs, materials[i], isWireframed);
        }
    }
    drawForMaterial(scene, object, techniqueCount, techniqueIndex, texs, material, isWireframed) {
        if (!material || !material.Initialized || !material.Enabled || !object.isVisible) {
            return;
        }
        const passCount = material.getPassCount(techniqueIndex);
        for (let pass = 0; pass < passCount; pass++) {
            material.apply({
                scene: scene,
                renderStage: this,
                renderer: this.Renderer,
                object: object,
                textureResource: texs,
                techniqueIndex: techniqueIndex,
                techniqueCount: techniqueCount,
                passIndex: pass,
                passCount: passCount,
                camera: this.Renderer.Camera
            });
            if (isWireframed) {
                object.Geometry.drawWireframe(this.Renderer.Canvas, material);
                return;
            }
            object.Geometry.drawElements(this.Renderer.Canvas, material);
        }
    }
    /**
     * Get default rbo that is allocated for this renderer.
     */
    get DefaultRBO() {
        const rm = JThreeContext.getContextComponent(ContextComponents.ResourceManager);
        return rm.getRBO(this.Renderer.ID + ".rbo.default");
    }
}
export default RenderStageBase;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvcmUvUmVuZGVyZXJzL1JlbmRlclN0YWdlcy9SZW5kZXJTdGFnZUJhc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ik9BRU8sa0JBQWtCLE1BQU0sa0NBQWtDO09BTTFELGlCQUFpQixNQUFNLDRCQUE0QjtPQUNuRCxhQUFhLE1BQU0sd0JBQXdCO0FBRWxELDhCQUF1QyxrQkFBa0I7SUFPdkQsWUFBWSxRQUF1QjtRQUNqQyxPQUFPLENBQUM7UUFOSCxtQkFBYyxHQUFPLEVBQUUsQ0FBQztRQVE3QixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztJQUM1QixDQUFDO0lBRU0sMkJBQTJCLENBQUMsY0FBc0I7UUFDdkQsTUFBTSxDQUFDO1lBQ0wsZUFBZSxFQUFFLE1BQU07WUFDdkIsWUFBWSxFQUFFLElBQUk7WUFDbEIsU0FBUyxFQUFFLE1BQU07WUFDakIsU0FBUyxFQUFFLElBQUk7WUFDZixZQUFZLEVBQUUsSUFBSTtZQUNsQixjQUFjLEVBQUUsV0FBVztZQUMzQixjQUFjLEVBQUUscUJBQXFCO1lBQ3JDLE9BQU8sRUFBRSxJQUFJO1lBQ2IsU0FBUyxFQUFFLElBQUk7WUFDZixRQUFRLEVBQUUsSUFBSTtZQUNkLFNBQVMsRUFBRSxJQUFJO1NBQ2hCLENBQUM7SUFDSixDQUFDO0lBRUY7O09BRUc7SUFDRixJQUFXLFFBQVE7UUFDakIsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDeEIsQ0FBQztJQUVELElBQVcsRUFBRTtRQUNYLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRU0sUUFBUSxDQUFDLEtBQVksRUFBRSxJQUF1QjtRQUNuRCxNQUFNLENBQUM7SUFDVCxDQUFDO0lBRU0sU0FBUyxDQUFDLEtBQVksRUFBRSxJQUF1QjtRQUNwRCxNQUFNLENBQUM7SUFDVCxDQUFDO0lBRUY7O09BRUc7SUFDSyxZQUFZLENBQUMsS0FBWSxFQUFFLGNBQXNCLEVBQUUsSUFBdUI7UUFDL0Us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RyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxjQUFjLENBQUMsQ0FBQztJQUN0RCxDQUFDO0FBQ0gsQ0FBQztBQUVELGVBQWUsZUFBZSxDQUFDIiwiZmlsZSI6IkNvcmUvUmVuZGVyZXJzL1JlbmRlclN0YWdlcy9SZW5kZXJTdGFnZUJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWF0ZXJpYWwgZnJvbSBcIi4uLy4uL01hdGVyaWFscy9NYXRlcmlhbFwiO1xuaW1wb3J0IElSZW5kZXJTdGFnZVJlbmRlcmVyQ29uZmlndXJlIGZyb20gXCIuL0lSZW5kZXJTdGFnZVJlbmRlcmVyQ29uZmlndXJlXCI7XG5pbXBvcnQgSlRocmVlT2JqZWN0V2l0aElEIGZyb20gXCIuLi8uLi8uLi9CYXNlL0pUaHJlZU9iamVjdFdpdGhJRFwiO1xuaW1wb3J0IEJhc2ljUmVuZGVyZXIgZnJvbSBcIi4uL0Jhc2ljUmVuZGVyZXJcIjtcbmltcG9ydCBTY2VuZU9iamVjdCBmcm9tIFwiLi4vLi4vU2NlbmVPYmplY3RzL1NjZW5lT2JqZWN0XCI7XG5pbXBvcnQgU2NlbmUgZnJvbSBcIi4uLy4uL1NjZW5lXCI7XG5pbXBvcnQgUmVzb2x2ZWRDaGFpbkluZm8gZnJvbSBcIi4uL1Jlc29sdmVkQ2hhaW5JbmZvXCI7XG5pbXBvcnQgUkJPIGZyb20gXCIuLi8uLi9SZXNvdXJjZXMvUkJPL1JCT1wiO1xuaW1wb3J0IENvbnRleHRDb21wb25lbnRzIGZyb20gXCIuLi8uLi8uLi9Db250ZXh0Q29tcG9uZW50c1wiO1xuaW1wb3J0IEpUaHJlZUNvbnRleHQgZnJvbSBcIi4uLy4uLy4uL0pUaHJlZUNvbnRleHRcIjtcbmltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSBcIi4uLy4uL1Jlc291cmNlTWFuYWdlclwiO1xuYWJzdHJhY3QgY2xhc3MgUmVuZGVyU3RhZ2VCYXNlIGV4dGVuZHMgSlRocmVlT2JqZWN0V2l0aElEIHtcblxuICBwdWJsaWMgc3RhZ2VWYXJpYWJsZXM6IHt9ID0ge307XG5cbiAgcHJpdmF0ZSBfcmVuZGVyZXI6IEJhc2ljUmVuZGVyZXI7XG5cblxuICBjb25zdHJ1Y3RvcihyZW5kZXJlcjogQmFzaWNSZW5kZXJlcikge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICB9XG5cbiAgcHVibGljIGdldERlZmF1bHRSZW5kZXJlckNvbmZpZ3VyZSh0ZWNobmlxdWVJbmRleDogbnVtYmVyKTogSVJlbmRlclN0YWdlUmVuZGVyZXJDb25maWd1cmUge1xuICAgIHJldHVybiB7XG4gICAgICBjdWxsT3JpZW50YXRpb246IFwiQkFDS1wiLFxuICAgICAgZGVwdGhFbmFibGVkOiB0cnVlLFxuICAgICAgZGVwdGhNb2RlOiBcIkxFU1NcIixcbiAgICAgIGRlcHRoTWFzazogdHJ1ZSxcbiAgICAgIGJsZW5kRW5hYmxlZDogdHJ1ZSxcbiAgICAgIGJsZW5kU3JjRmFjdG9yOiBcIlNSQ19BTFBIQVwiLFxuICAgICAgYmxlbmREc3RGYWN0b3I6IFwiT05FX01JTlVTX1NSQ19BTFBIQVwiLFxuICAgICAgcmVkTWFzazogdHJ1ZSxcbiAgICAgIGdyZWVuTWFzazogdHJ1ZSxcbiAgICAgIGJsdWVNYXNrOiB0cnVlLFxuICAgICAgYWxwaGFNYXNrOiB0cnVlXG4gICAgfTtcbiAgfVxuXG5cdC8qKlxuXHQgKiBHZXR0ZXIgZm9yIHJlbmRlcmVyIGhhdmluZyB0aGlzIHJlbmRlcnN0YWdlXG5cdCAqL1xuICBwdWJsaWMgZ2V0IFJlbmRlcmVyKCk6IEJhc2ljUmVuZGVyZXIge1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgR0woKSB7XG4gICAgcmV0dXJuIHRoaXMuUmVuZGVyZXIuR0w7XG4gIH1cblxuICBwdWJsaWMgcHJlU3RhZ2Uoc2NlbmU6IFNjZW5lLCB0ZXhzOiBSZXNvbHZlZENoYWluSW5mbyk6IHZvaWQge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHB1YmxpYyBwb3N0U3RhZ2Uoc2NlbmU6IFNjZW5lLCB0ZXhzOiBSZXNvbHZlZENoYWluSW5mbyk6IHZvaWQge1xuICAgIHJldHVybjtcbiAgfVxuXG5cdC8qKlxuXHQgKiBUaGlzIG1ldGhvZCB3aWxsIGJlIGNhbGxlZCBiZWZvcmUgcHJvY2VzcyByZW5kZXIgaW4gZWFjaCBwYXNzXG5cdCAqL1xuICBwdWJsaWMgcHJlVGVjaG5pcXVlKHNjZW5lOiBTY2VuZSwgdGVjaG5pcXVlSW5kZXg6IG51bWJlciwgdGV4czogUmVzb2x2ZWRDaGFpbkluZm8pOiB2b2lkIHtcbiAgICByZXR1cm47XG4gIH1cblx0LyoqXG5cdCAqIFRoaXMgbWV0aG9kIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHByb2Nlc3MgcmVuZGVyIGluIGVhY2ggcGFzcy5cblx0ICovXG4gIHB1YmxpYyBwb3N0VGVjaG5pcXVlKHNjZW5lOiBTY2VuZSwgdGVjaG5pcXVlSW5kZXg6IG51bWJlciwgdGV4czogUmVzb2x2ZWRDaGFpbkluZm8pOiB2b2lkIHtcbiAgICB0aGlzLlJlbmRlcmVyLkdMLmZsdXNoKCk7XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgcmVuZGVyKHNjZW5lOiBTY2VuZSwgb2JqZWN0OiBTY2VuZU9iamVjdCwgdGVjaG5pcXVlQ291bnQ6IG51bWJlciwgdGVjaG5pcXVlSW5kZXg6IG51bWJlciwgdGV4czogUmVzb2x2ZWRDaGFpbkluZm8pOiB2b2lkO1xuXG4gIHB1YmxpYyBuZWVkUmVuZGVyKHNjZW5lOiBTY2VuZSwgb2JqZWN0OiBTY2VuZU9iamVjdCwgdGVjaG5pcXVlSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRUZWNobmlxdWVDb3VudChzY2VuZTogU2NlbmUpOiBudW1iZXIge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgcHVibGljIGdldFRhcmdldCh0ZWNobmlxdWVJbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJzY2VuZVwiO1xuICB9XG5cbiAgcHVibGljIGRyYXdGb3JNYXRlcmlhbHMoc2NlbmU6IFNjZW5lLCBvYmplY3Q6IFNjZW5lT2JqZWN0LCB0ZWNobmlxdWVDb3VudDogbnVtYmVyLCB0ZWNobmlxdWVJbmRleDogbnVtYmVyLCB0ZXhzOiBSZXNvbHZlZENoYWluSW5mbywgbWF0ZXJpYWxHcm91cDogc3RyaW5nLCBpc1dpcmVmcmFtZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBpZiAoIW9iamVjdC5pc1Zpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWF0ZXJpYWxzID0gb2JqZWN0LmdldE1hdGVyaWFscyhtYXRlcmlhbEdyb3VwKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGVyaWFscy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5kcmF3Rm9yTWF0ZXJpYWwoc2NlbmUsIG9iamVjdCwgdGVjaG5pcXVlQ291bnQsIHRlY2huaXF1ZUluZGV4LCB0ZXhzLCBtYXRlcmlhbHNbaV0sIGlzV2lyZWZyYW1lZCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRyYXdGb3JNYXRlcmlhbChzY2VuZTogU2NlbmUsIG9iamVjdDogU2NlbmVPYmplY3QsIHRlY2huaXF1ZUNvdW50OiBudW1iZXIsIHRlY2huaXF1ZUluZGV4OiBudW1iZXIsIHRleHM6IFJlc29sdmVkQ2hhaW5JbmZvLCBtYXRlcmlhbDogTWF0ZXJpYWwsIGlzV2lyZWZyYW1lZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghbWF0ZXJpYWwgfHwgIW1hdGVyaWFsLkluaXRpYWxpemVkIHx8ICFtYXRlcmlhbC5FbmFibGVkIHx8ICFvYmplY3QuaXNWaXNpYmxlKSB7IHJldHVybjsgfVxuICAgIGNvbnN0IHBhc3NDb3VudCA9IG1hdGVyaWFsLmdldFBhc3NDb3VudCh0ZWNobmlxdWVJbmRleCk7XG4gICAgZm9yIChsZXQgcGFzcyA9IDA7IHBhc3MgPCBwYXNzQ291bnQ7IHBhc3MrKykge1xuICAgICAgbWF0ZXJpYWwuYXBwbHkoe1xuICAgICAgICBzY2VuZTogc2NlbmUsXG4gICAgICAgIHJlbmRlclN0YWdlOiB0aGlzLFxuICAgICAgICByZW5kZXJlcjogdGhpcy5SZW5kZXJlcixcbiAgICAgICAgb2JqZWN0OiBvYmplY3QsXG4gICAgICAgIHRleHR1cmVSZXNvdXJjZTogdGV4cyxcbiAgICAgICAgdGVjaG5pcXVlSW5kZXg6IHRlY2huaXF1ZUluZGV4LFxuICAgICAgICB0ZWNobmlxdWVDb3VudDogdGVjaG5pcXVlQ291bnQsXG4gICAgICAgIHBhc3NJbmRleDogcGFzcyxcbiAgICAgICAgcGFzc0NvdW50OiBwYXNzQ291bnQsXG4gICAgICAgIGNhbWVyYTogdGhpcy5SZW5kZXJlci5DYW1lcmFcbiAgICAgIH0pO1xuICAgICAgaWYgKGlzV2lyZWZyYW1lZCkge1xuICAgICAgICBvYmplY3QuR2VvbWV0cnkuZHJhd1dpcmVmcmFtZSh0aGlzLlJlbmRlcmVyLkNhbnZhcywgbWF0ZXJpYWwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBvYmplY3QuR2VvbWV0cnkuZHJhd0VsZW1lbnRzKHRoaXMuUmVuZGVyZXIuQ2FudmFzLCBtYXRlcmlhbCk7XG4gICAgfVxuICB9XG5cblx0LyoqXG5cdCAqIEdldCBkZWZhdWx0IHJibyB0aGF0IGlzIGFsbG9jYXRlZCBmb3IgdGhpcyByZW5kZXJlci5cblx0ICovXG4gIHB1YmxpYyBnZXQgRGVmYXVsdFJCTygpOiBSQk8ge1xuICAgIGNvbnN0IHJtID0gSlRocmVlQ29udGV4dC5nZXRDb250ZXh0Q29tcG9uZW50PFJlc291cmNlTWFuYWdlcj4oQ29udGV4dENvbXBvbmVudHMuUmVzb3VyY2VNYW5hZ2VyKTtcbiAgICByZXR1cm4gcm0uZ2V0UkJPKHRoaXMuUmVuZGVyZXIuSUQgKyBcIi5yYm8uZGVmYXVsdFwiKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJTdGFnZUJhc2U7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=

import Camera from "./Camera";
import Vector3 from "../../../Math/Vector3";
import { mat4 } from "gl-matrix";
/**
 * The abstract class to be overridden by camera related class having view matrix.
 *
 * ビュー行列を保持するカメラによってオーバーライドされるための抽象クラス
 * @type {[type]}
 */
class ViewCameraBase extends Camera {
    /**
     * constructor
     */
    constructor() {
        super();
        this._generateViewMatrix();
        this.__transformer.onUpdateTransform((t, o) => this._updateViewProjectionMatrix());
    }
    /**
     * Notify view-projection matrix was updated.
     *
     * ビュー・射影行列が更新されたことを通知します。
     */
    _updateViewProjectionMatrix() {
        this._generateViewMatrix();
        this.__updateViewProjectionMatrix();
    }
    /**
     * Generate view matrix
     *
     * ビュー行列を生成します。
     */
    _generateViewMatrix() {
        mat4.lookAt(this.viewMatrix.rawElements, this.Transformer.GlobalPosition.rawElements, Vector3.add(this.Transformer.forward, this.Transformer.GlobalPosition).rawElements, this.Transformer.up.rawElements);
    }
}
export default ViewCameraBase;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvcmUvU2NlbmVPYmplY3RzL0NhbWVyYS9WaWV3Q2FtZXJhQmFzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiT0FBTyxNQUFNLE1BQU0sVUFBVTtPQUN0QixPQUFPLE1BQU0sdUJBQXVCO09BQ3BDLEVBQUMsSUFBSSxFQUFDLE1BQU0sV0FBVztBQUM5Qjs7Ozs7R0FLRztBQUNILDZCQUFzQyxNQUFNO0lBQ3hDOztPQUVHO0lBQ0g7UUFDSSxPQUFPLENBQUM7UUFDUixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMsYUFBYSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJLENBQUMsMkJBQTJCLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZGLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ssMkJBQTJCO1FBQy9CLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1FBQzNCLElBQUksQ0FBQyw0QkFBNEIsRUFBRSxDQUFDO0lBQ3hDLENBQUM7SUFFRDs7OztPQUlHO0lBQ0ssbUJBQW1CO1FBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDL00sQ0FBQztBQUNMLENBQUM7QUFFRCxlQUFlLGNBQWMsQ0FBQyIsImZpbGUiOiJDb3JlL1NjZW5lT2JqZWN0cy9DYW1lcmEvVmlld0NhbWVyYUJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FtZXJhIGZyb20gXCIuL0NhbWVyYVwiO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSBcIi4uLy4uLy4uL01hdGgvVmVjdG9yM1wiO1xuaW1wb3J0IHttYXQ0fSBmcm9tIFwiZ2wtbWF0cml4XCI7XG4vKipcbiAqIFRoZSBhYnN0cmFjdCBjbGFzcyB0byBiZSBvdmVycmlkZGVuIGJ5IGNhbWVyYSByZWxhdGVkIGNsYXNzIGhhdmluZyB2aWV3IG1hdHJpeC5cbiAqXG4gKiDjg5Pjg6Xjg7zooYzliJfjgpLkv53mjIHjgZnjgovjgqvjg6Hjg6njgavjgojjgaPjgabjgqrjg7zjg5Djg7zjg6njgqTjg4njgZXjgozjgovjgZ/jgoHjga7mir3osaHjgq/jg6njgrlcbiAqIEB0eXBlIHtbdHlwZV19XG4gKi9cbmFic3RyYWN0IGNsYXNzIFZpZXdDYW1lcmFCYXNlIGV4dGVuZHMgQ2FtZXJhIHtcbiAgICAvKipcbiAgICAgKiBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9nZW5lcmF0ZVZpZXdNYXRyaXgoKTtcbiAgICAgICAgdGhpcy5fX3RyYW5zZm9ybWVyLm9uVXBkYXRlVHJhbnNmb3JtKCh0LCBvKSA9PiB0aGlzLl91cGRhdGVWaWV3UHJvamVjdGlvbk1hdHJpeCgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdmlldy1wcm9qZWN0aW9uIG1hdHJpeCB3YXMgdXBkYXRlZC5cbiAgICAgKlxuICAgICAqIOODk+ODpeODvOODu+WwhOW9seihjOWIl+OBjOabtOaWsOOBleOCjOOBn+OBk+OBqOOCkumAmuefpeOBl+OBvuOBmeOAglxuICAgICAqL1xuICAgIHByaXZhdGUgX3VwZGF0ZVZpZXdQcm9qZWN0aW9uTWF0cml4KCk6IHZvaWQge1xuICAgICAgICB0aGlzLl9nZW5lcmF0ZVZpZXdNYXRyaXgoKTtcbiAgICAgICAgdGhpcy5fX3VwZGF0ZVZpZXdQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGUgdmlldyBtYXRyaXhcbiAgICAgKlxuICAgICAqIOODk+ODpeODvOihjOWIl+OCkueUn+aIkOOBl+OBvuOBmeOAglxuICAgICAqL1xuICAgIHByaXZhdGUgX2dlbmVyYXRlVmlld01hdHJpeCgpOiB2b2lkIHtcbiAgICAgICAgbWF0NC5sb29rQXQodGhpcy52aWV3TWF0cml4LnJhd0VsZW1lbnRzLCB0aGlzLlRyYW5zZm9ybWVyLkdsb2JhbFBvc2l0aW9uLnJhd0VsZW1lbnRzLCBWZWN0b3IzLmFkZCh0aGlzLlRyYW5zZm9ybWVyLmZvcndhcmQsIHRoaXMuVHJhbnNmb3JtZXIuR2xvYmFsUG9zaXRpb24pLnJhd0VsZW1lbnRzLCB0aGlzLlRyYW5zZm9ybWVyLnVwLnJhd0VsZW1lbnRzKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZpZXdDYW1lcmFCYXNlO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9

import MaterialNodeBase from "./MaterialNodeBase";
class MaterialNode extends MaterialNodeBase {
    constructor() {
        super();
        this.attributes.defineAttribute({
            "type": {
                value: "builtin.phong",
                converter: "string",
                onchanged: this._onTypeAttrChanged,
            }
        });
    }
    __onMount() {
        super.__onMount();
    }
    _onTypeAttrChanged(attr) {
        let material = this.__getMaterialFromMatName(attr.Value);
        if (material) {
            this.__setMaterial(material, () => {
                attr.done();
            });
        }
        else {
            this.nodeImport("jthree.import", `material-${attr.Value}`, (node) => {
                if (node) {
                    material = this.__getMaterialFromMatName(attr.Value);
                    this.__setMaterial(material, () => {
                        attr.done();
                    });
                }
                attr.done();
            });
        }
    }
}
export default MaterialNode;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdvbWwvTm9kZXMvTWF0ZXJpYWxzL01hdGVyaWFsTm9kZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiT0FBTyxnQkFBZ0IsTUFBTSxvQkFBb0I7QUFLakQsMkJBQTJCLGdCQUFnQjtJQUN6QztRQUNFLE9BQU8sQ0FBQztRQUNSLElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDO1lBQzlCLE1BQU0sRUFBRTtnQkFDTixLQUFLLEVBQUUsZUFBZTtnQkFDdEIsU0FBUyxFQUFFLFFBQVE7Z0JBQ25CLFNBQVMsRUFBRSxJQUFJLENBQUMsa0JBQWtCO2FBQ25DO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVTLFNBQVM7UUFDakIsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFTyxrQkFBa0IsQ0FBQyxJQUFtQjtRQUM1QyxJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3pELEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDYixJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRTtnQkFDM0IsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2QsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixJQUFJLENBQUMsVUFBVSxDQUFDLGVBQWUsRUFBRSxZQUFZLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLElBQXNCO2dCQUNoRixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO29CQUNULFFBQVEsR0FBRyxJQUFJLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNyRCxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsRUFBRTt3QkFDM0IsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO29CQUNkLENBQUMsQ0FBQyxDQUFDO2dCQUNMLENBQUM7Z0JBQ0QsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ2QsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUM7QUFFRCxlQUFlLFlBQVksQ0FBQyIsImZpbGUiOiJHb21sL05vZGVzL01hdGVyaWFscy9NYXRlcmlhbE5vZGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWF0ZXJpYWxOb2RlQmFzZSBmcm9tIFwiLi9NYXRlcmlhbE5vZGVCYXNlXCI7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSBcIi4uLy4uLy4uL0NvcmUvTWF0ZXJpYWxzL01hdGVyaWFsXCI7XG5pbXBvcnQgR29tbEF0dHJpYnV0ZSBmcm9tIFwiLi4vLi4vR29tbEF0dHJpYnV0ZVwiO1xuaW1wb3J0IEdvbWxUcmVlTm9kZUJhc2UgZnJvbSBcIi4uLy4uL0dvbWxUcmVlTm9kZUJhc2VcIjtcblxuY2xhc3MgTWF0ZXJpYWxOb2RlIGV4dGVuZHMgTWF0ZXJpYWxOb2RlQmFzZTxNYXRlcmlhbD4ge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXR0cmlidXRlcy5kZWZpbmVBdHRyaWJ1dGUoe1xuICAgICAgXCJ0eXBlXCI6IHtcbiAgICAgICAgdmFsdWU6IFwiYnVpbHRpbi5waG9uZ1wiLFxuICAgICAgICBjb252ZXJ0ZXI6IFwic3RyaW5nXCIsXG4gICAgICAgIG9uY2hhbmdlZDogdGhpcy5fb25UeXBlQXR0ckNoYW5nZWQsXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX19vbk1vdW50KCk6IHZvaWQge1xuICAgIHN1cGVyLl9fb25Nb3VudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfb25UeXBlQXR0ckNoYW5nZWQoYXR0cjogR29tbEF0dHJpYnV0ZSk6IHZvaWQge1xuICAgIGxldCBtYXRlcmlhbCA9IHRoaXMuX19nZXRNYXRlcmlhbEZyb21NYXROYW1lKGF0dHIuVmFsdWUpO1xuICAgIGlmIChtYXRlcmlhbCkge1xuICAgICAgdGhpcy5fX3NldE1hdGVyaWFsKG1hdGVyaWFsLCAoKSA9PiB7XG4gICAgICAgIGF0dHIuZG9uZSgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubm9kZUltcG9ydChcImp0aHJlZS5pbXBvcnRcIiwgYG1hdGVyaWFsLSR7YXR0ci5WYWx1ZX1gLCAobm9kZTogR29tbFRyZWVOb2RlQmFzZSkgPT4ge1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIG1hdGVyaWFsID0gdGhpcy5fX2dldE1hdGVyaWFsRnJvbU1hdE5hbWUoYXR0ci5WYWx1ZSk7XG4gICAgICAgICAgdGhpcy5fX3NldE1hdGVyaWFsKG1hdGVyaWFsLCAoKSA9PiB7XG4gICAgICAgICAgICBhdHRyLmRvbmUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBhdHRyLmRvbmUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNYXRlcmlhbE5vZGU7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
